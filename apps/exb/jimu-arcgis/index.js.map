{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./jimu-arcgis/lib/utils/portal-url-utils.ts","webpack:///external \"esri/portal/PortalItem\"","webpack:///external \"esri/identity/IdentityManager\"","webpack:///external \"jimu-core\"","webpack:///external \"esri/request\"","webpack:///external \"esri/config\"","webpack:///external \"esri/portal/Portal\"","webpack:///./jimu-arcgis/lib/services/portal/portal-service.ts","webpack:///./jimu-arcgis/lib/data-source.ts","webpack:///external \"esri/WebMap\"","webpack:///external \"esri/layers/FeatureLayer\"","webpack:///external \"esri/WebScene\"","webpack:///external \"esri/Map\"","webpack:///external \"esri/views/MapView\"","webpack:///./node_modules/fbjs/lib/emptyFunction.js","webpack:///./node_modules/fbjs/lib/emptyObject.js","webpack:///./node_modules/fbjs/lib/invariant.js","webpack:///./node_modules/object-assign/index.js","webpack:///./node_modules/react/cjs/react.production.min.js","webpack:///./node_modules/react/index.js","webpack:///./jimu-arcgis/lib/components/jimu-map.tsx","webpack:///./jimu-arcgis/index.tsx"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","getServerByUrl","_url","trim","replace","indexOf","slice","split","getDomain","url","serverName","matched","result","match","test","isOnline","toLowerCase","isArcGIScom","server","getStandardPortalUrl","_portalUrl","getProtocol","addProtocol","pattern","RegExp","defaultProtocol","window","location","protocol","startWith","host","setHttpProtocol","setHttpsProtocol","getBaseItemUrl","baseItemUrl","portalUrl","getItemUrl","_itemId","itemUrl","getBaseUserUrl","baseUserUrl","getUserUrl","_userId","userUrl","getContentUrl","contentUrl","getUserContentUrl","_user","_folderId","userContentUrl","getUserItemsUrl","userItemsUrl","getServerWithProtocol","isSameServer","_url1","_url2","isSameDomain","url1","url2","domain1","domain2","isOrgOnline","isSamePortalUrl","_portalUrl1","_portalUrl2","patt1","patt2","updateUrlProtocolByOtherUrl","otherUrl","removeProtocol","setProtocol","getSharingUrl","sharingUrl","getOAuth2Url","oauth2Url","getAppIdUrl","_appId","appIdUrl","getSignInUrl","signInUrl","getBaseSearchUrl","searchUrl","getItemDataUrl","itemDataUrl","getItemGroupsUrl","getGenerateTokenUrl","tokenUrl","getItemDetailsPageUrl","getUserProfilePageUrl","getBaseGroupUrl","thePortalUrl","getPortalSelfInfoUrl","getCommunitySelfUrl","getUserTagsUrl","userTagsUrl","getUserThumbnailUrl","userId","thumbnail","thumbnailUrl","getUserContentItemUrl","userContentItemUrl","getItemResourceUrl","_customResUrl","itemResourceUrl","getAddItemUrl","addItemUrl","getDeleteItemUrl","deleteItemUrl","getUpdateItemUrl","updateItem","shareItemUrl","getHomeIndexUrl","getHomeMapViewerUrl","itemId","getHomeSceneViewerUrl","getHomeGalleryUrl","getHomeGroupsUrl","getHomeMyContentUrl","getHomeMyOrganizationUrl","getHomeUserUrl","getPortalHelpUrl","locale","getPortalAdminHelpUrl","getPortalProxyUrl","getOAuth2SignOutUrl","signOutUrl","getNewPrintUrl","getSwitchAccoutnsUrl","client_id","redirect_uri","__WEBPACK_EXTERNAL_MODULE__1__","__WEBPACK_EXTERNAL_MODULE__2__","__WEBPACK_EXTERNAL_MODULE__3__","__WEBPACK_EXTERNAL_MODULE__4__","__WEBPACK_EXTERNAL_MODULE__5__","__WEBPACK_EXTERNAL_MODULE__6__","Portal","PortalItem","esriConfig","IdentityManager","esriRequest","portalUrlUtils","portals","JimuPortal","_super","__extends","getItem","this","requestOptions","responseType","query","f","callbackParamName","getToken","token","then","res","data","getItemData","user","cred","findCredential","username","getPortal","createPortal","loaded","Promise","resolve","load","portal","checkItemTitleExist","userName","itemTitle","params","queryItems","queryResult","total","getDefaultWebScene","args","itemTypes","queryStr","allTypes","concat","getAllItemTypes","length","validStr","forEach","type","index","sumAllTypes","removedTypes","filter","removedType","every","itemType","getItemQueryStringByTypes","response","results","id","searchWABDefaultWebScene","webSceneId","getUser","operationalLayers","baseMap","title","baseMapLayers","layerType","elevationLayers","version","authoringApp","authoringAppVersion","spatialReference","wkid","latestWkid","viewingMode","initialState","viewpoint","scale","rotation","targetGeometry","x","y","z","camera","position","heading","tilt","environment","lighting","datetime","displayUTCOffset","presentation","slides","typeKeywords","tags","text","JSON","stringify","snippet","addItem","success","console","error","reject","createWABDefaultWebScene","DataSourceTypes","jimu_core_1","Map","WebMap","WebScene","FeatureLayer","jimu_core_2","portal_service_1","MapDataSource","dsConfig","map","_this","isDataSourceSet","init","getDataSources","layers","toArray","layer","FeatureLayerDataSource","getDataSchema","AbstractDataSource","WebMapDataSource","webMap","WebSceneDataSource","webScene","ViewDataSource","mapView","MapView","layerViewDatasources","setView","when","updateStatus","DataSourceStatus","Loaded","getLayerViewDatasourceOnDemand","layerId","allLayerViews","layerView","find","view","flayerViewDs","FeatureLayerViewDataSource","selectRecord","currentIndexes","layerViewDs","currentLayerView","dataSourceManager","onDataSourceCurrentIndexesChanged","highlightRecord","objectId","records","featureLayerDatasource","getRecords","findIndex","feature","attributes","featureLayer","objectIdField","_highlightHandler","remove","featureLayerView","highlight","getCurrentRecord","undefined","MapViewDataSource","apply","arguments","SceneViewDataSource","SceneView","FeatureDataRecord","graphic","getData","FeatureSetDataSource","featureSet","features","Unloaded","status","LoadedLoading","UnloadedLoading","queryFeatures","FeatureLayerView","DataSourceFactoryExtension","getSupportDataSourceTypes","createDataSource","createMapDataSource","createFeatureLayerDataSource","createWebMapDataSource","createWebSceneDataSource","createMapViewDataSource","createSceneViewDataSource","add","portalItem","sceneView","__WEBPACK_EXTERNAL_MODULE__9__","__WEBPACK_EXTERNAL_MODULE__12__","__WEBPACK_EXTERNAL_MODULE__13__","__WEBPACK_EXTERNAL_MODULE__14__","__WEBPACK_EXTERNAL_MODULE__15__","makeEmptyFunction","arg","emptyFunction","thatReturns","thatReturnsFalse","thatReturnsTrue","thatReturnsNull","thatReturnsThis","thatReturnsArgument","validateFormat","format","condition","a","b","e","Error","argIndex","framesToPop","getOwnPropertySymbols","propIsEnumerable","propertyIsEnumerable","assign","test1","String","getOwnPropertyNames","test2","fromCharCode","join","test3","letter","keys","err","shouldUseNative","target","source","from","symbols","to","val","TypeError","toObject","k","q","for","u","v","w","A","B","C","iterator","D","encodeURIComponent","E","isMounted","enqueueForceUpdate","enqueueReplaceState","enqueueSetState","F","props","context","refs","updater","G","H","isReactComponent","setState","forceUpdate","I","constructor","isPureReactComponent","J","current","K","L","ref","__self","__source","M","g","h","children","Array","defaultProps","$$typeof","_owner","N","O","P","Q","pop","keyPrefix","func","count","R","push","S","T","isArray","next","done","=",":","escape","toString","U","V","W","X","Children","only","createRef","Component","PureComponent","createContext","_calculateChangedBits","_defaultValue","_currentValue","_currentValue2","_changedBits","_changedBits2","Provider","Consumer","_context","forwardRef","render","Fragment","StrictMode","unstable_AsyncMode","unstable_Profiler","createElement","cloneElement","createFactory","isValidElement","__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED","ReactCurrentOwner","Y","default","Z","React","JimuMap","componentDidMount","mapDataSource","container","mapContainer","onMapLoaded","className","style","dom","jimu_map_1","data_source_1","portal_url_utils_1","sessionManager","SessionManager","getInstance","session","getSession","registerToken","toCredential","handler_1","on","_a","credential","getPortalUrl","initFromCredential","ExtensionManager","registerExtension","epName","ExtensionPoints","DataSourceFactory","extension","__export"],"mappings":"4QACA,IAAAA,KAGA,SAAAC,EAAAC,GAGA,GAAAF,EAAAE,GACA,OAAAF,EAAAE,GAAAC,QAGA,IAAAC,EAAAJ,EAAAE,IACAG,EAAAH,EACAI,GAAA,EACAH,YAUA,OANAI,EAAAL,GAAAM,KAAAJ,EAAAD,QAAAC,IAAAD,QAAAF,GAGAG,EAAAE,GAAA,EAGAF,EAAAD,QA0DA,OArDAF,EAAAQ,EAAAF,EAGAN,EAAAS,EAAAV,EAGAC,EAAAU,EAAA,SAAAR,EAAAS,EAAAC,GACAZ,EAAAa,EAAAX,EAAAS,IACAG,OAAAC,eAAAb,EAAAS,GAA0CK,YAAA,EAAAC,IAAAL,KAK1CZ,EAAAkB,EAAA,SAAAhB,GACA,oBAAAiB,eAAAC,aACAN,OAAAC,eAAAb,EAAAiB,OAAAC,aAAwDC,MAAA,WAExDP,OAAAC,eAAAb,EAAA,cAAiDmB,OAAA,KAQjDrB,EAAAsB,EAAA,SAAAD,EAAAE,GAEA,GADA,EAAAA,IAAAF,EAAArB,EAAAqB,IACA,EAAAE,EAAA,OAAAF,EACA,KAAAE,GAAA,iBAAAF,QAAAG,WAAA,OAAAH,EACA,IAAAI,EAAAX,OAAAY,OAAA,MAGA,GAFA1B,EAAAkB,EAAAO,GACAX,OAAAC,eAAAU,EAAA,WAAyCT,YAAA,EAAAK,UACzC,EAAAE,GAAA,iBAAAF,EAAA,QAAAM,KAAAN,EAAArB,EAAAU,EAAAe,EAAAE,EAAA,SAAAA,GAAgH,OAAAN,EAAAM,IAAqBC,KAAA,KAAAD,IACrI,OAAAF,GAIAzB,EAAA6B,EAAA,SAAA1B,GACA,IAAAS,EAAAT,KAAAqB,WACA,WAA2B,OAAArB,EAAA,SAC3B,WAAiC,OAAAA,GAEjC,OADAH,EAAAU,EAAAE,EAAA,IAAAA,GACAA,GAIAZ,EAAAa,EAAA,SAAAiB,EAAAC,GAAsD,OAAAjB,OAAAkB,UAAAC,eAAA1B,KAAAuB,EAAAC,IAGtD/B,EAAAkC,EAAA,GAIAlC,IAAAmC,EAAA,mCClFA,SAAAC,EAA+BC,GAQ7B,OAJ0B,KAF1BA,GADAA,GAAQA,GAAQ,IAAIC,QACRC,QAAQ,sBAAuB,KAEnCC,QAAQ,QACdH,EAAOA,EAAKI,MAAM,IAGbJ,EAAKK,MAAM,KAAK,GAiCzB,SAAAC,EAA0BC,GACxB,IAAIC,EAAYC,EAASC,EAAS,GAclC,OAZAF,EAAaT,EAAeQ,KAIV,QADhBE,GADAD,EAAaA,EAAWN,QAAQ,QAAS,KACpBS,MAAM,oBAEzBD,EAASD,EAAQ,GAEb,aAAaG,KAAKF,KACpBA,EAAS,KAIRA,EAeT,SAAAG,EAAyBb,GAEvB,OADaD,EAAeC,GAAMc,cACpBX,QAAQ,gBAAkB,EAG1C,SAAAY,EAA4Bf,GAC1B,IAAIgB,EAASjB,EAAeC,GAAMc,cAClC,MAAkB,mBAAXE,GAA0C,eAAXA,EAGxC,SAAAC,EAAqCC,GACnC,IAAIF,EAASjB,EAAemB,GAC5B,GAAe,KAAXF,EACF,MAAO,GAET,GAAIH,EAASG,GAAS,CACjBD,EAAYC,KACbA,EAAS,kBAIXE,EADeC,EADfD,EAAaE,EAAYF,IAED,MAAQF,MAC3B,CAELE,EAAaE,EADbF,GAAcA,GAAc,IAAIjB,OAAOC,QAAQ,gBAAiB,IAAIA,QAAQ,QAAS,KAErF,IACImB,EAAU,IAAIC,OADJ,cAAkBN,EACE,KACvBE,EAAWhB,QAAQmB,EAAS,MAErCH,GAA0B,WAI9B,OAAOA,EAgBT,SAAAE,EAA4Bb,GAI1B,GAHiBA,EAAIO,cAAcX,QAAQ,aAAe,GACxDI,EAAIO,cAAcX,QAAQ,cAAgB,EAE9B,CACZ,IAAIoB,EAAkB,GACD,oBAAXC,QAA0BA,OAAOC,UAEzCF,EAAkBC,OAAOC,SAASC,SAEhCnB,EADEA,EAAIoB,UAAU,MACVJ,EAAkBhB,EACfA,EAAIoB,UAAU,KAEjBJ,EAAkB,KAAOC,OAAOC,SAASG,KAAOrB,EAEhDgB,EAAkB,KAAOhB,IAKjCgB,EAAkB,QAEhBhB,EADEA,EAAIoB,UAAU,MACVJ,EAAkBhB,EAElBgB,EAAkB,KAAOhB,GAKrC,OAAOA,EAGT,SAAAY,EAA4BZ,GAI1B,IAAImB,EAAW,GAQf,OAN+B,KAD/BnB,EAAMA,EAAIO,eACHX,QAAQ,YACbuB,EAAW,QAEsB,IAA3BnB,EAAIJ,QAAQ,aAClBuB,EAAW,QAENA,EAmBT,SAAAG,EAAgC7B,GAI9B,OAHAA,EAAOoB,EAAYpB,IAEJE,QADL,cACkB,WAI9B,SAAA4B,EAAiC9B,GAI/B,OAHAA,EAAOoB,EAAYpB,IAEJE,QADL,aACkB,YA4D9B,SAAA6B,EAA+Bb,GAC7B,IAAIc,EAAc,GACdC,EAAYhB,EAAqBC,GAIrC,OAHGe,IACDD,EAAcC,EAAY,+BAErBD,EAGT,SAAAE,EAA2BhB,EAAYiB,GACrC,IAAIC,EAAU,GACVJ,EAAcD,EAAeb,GAIjC,OAHGc,GAAeG,IAChBC,EAAUJ,EAAc,IAAMG,GAEzBC,EAiFT,SAAAC,EAA+BnB,GAC7B,IAAIoB,EAAc,GACdL,EAAYhB,EAAqBC,GAIrC,OAHGe,IACDK,EAAcL,EAAY,iCAErBK,EAGT,SAAAC,EAA2BrB,EAAYsB,GACrC,IAAIC,EAAU,GACVH,EAAcD,EAAenB,GAIjC,OAHGA,GAAcsB,IACfC,EAAUH,EAAc,IAAME,GAEzBC,EAqBT,SAAAC,EAA8BxB,GAC5B,IAAIyB,EAAa,GAKjB,OAJGzB,IAEDyB,GADAzB,EAAaD,EAAqBC,IACR,yBAErByB,EAGT,SAAAC,EAAkC1B,EAAY2B,EAAOC,GACnD,IAAIH,EAAa,GAAII,EAAiB,GAStC,OARG7B,GAAc2B,IACfF,EAAaD,EAAcxB,GAEzB6B,EADCD,EACgBH,EAAa,UAAYE,EAAQ,IAAMC,EAEvCH,EAAa,UAAYE,GAGvCE,EA4CT,SAAAC,EAAgC9B,EAAY2B,EAAOC,GACjD,IAAyBG,EAAe,GAKxC,OAJG/B,GAAc2B,IAEfI,EADiBL,EAAkB1B,EAAY2B,EAAOC,GACtB,UAE3BG,mDAtcTpF,EAAAkC,iBAWAlC,EAAAqF,sBAAA,SAAsClD,GACpC,IAAIU,EAAS,GAGb,GAFAV,GAAQA,GAAQ,IAAIC,OAEZ,CACN,IAAIe,EAASjB,EAAeC,GAE5B,IAAIgB,EACF,OAAON,EAGT,IAAIgB,EAAWP,EAAYnB,GAExB0B,EACDhB,EAASgB,EAAW,MAAQV,EAEC,IAAvBhB,EAAKG,QAAQ,QACnBO,EAAS,KAAOM,GAIpB,OAAON,GAGT7C,EAAAsF,aAAA,SAA6BC,EAAOC,GAGlC,OAFAD,EAAQrD,EAAeqD,IAAU,GACjCC,EAAQtD,EAAesD,IAAU,GAC1BD,EAAMtC,gBAAkBuC,EAAMvC,eAGvCjD,EAAAyC,YAkBAzC,EAAAyF,aAAA,SAA6BC,EAAMC,GACjC,IAAIC,EAAUnD,EAAUiD,GACtBG,EAAUpD,EAAUkD,GAEtB,MAAmB,KAAZC,GAAkBA,IAAYC,GAGvC7F,EAAA8F,YAAA,SAA4B3D,GAE1B,OADaD,EAAeC,GAAMc,cACpBX,QAAQ,qBAAuB,GAG/CtC,EAAAgD,WAKAhD,EAAAkD,cAKAlD,EAAAoD,uBA0BApD,EAAA+F,gBAAA,SAAgCC,EAAaC,GAI3C,IAAIC,EAAQ,mBACRC,EAAQ,UAKZ,OAJAH,EAAc5C,EAAqB4C,GAClC/C,cAAcZ,QAAQ6D,EAAO,IAAI7D,QAAQ8D,EAAO,QACjDF,EAAc7C,EAAqB6C,GAClChD,cAAcZ,QAAQ6D,EAAO,IAAI7D,QAAQ8D,EAAO,MAInDnG,EAAAuD,cAgCAvD,EAAAsD,cAeAtD,EAAAoG,4BAAA,SAA4C1D,EAAK2D,GAO/C,OALoC,KADpCA,EAAWA,EAASpD,eACRX,QAAQ,YAClBI,EAAMuB,EAAiBvB,GACgB,IAAhC2D,EAAS/D,QAAQ,aACxBI,EAAMsB,EAAgBtB,IAEjBA,GAGT1C,EAAAsG,eAAA,SAA+BnE,GAG7B,OAAOA,EAAKE,QAAQ,kBAAmB,OAGzCrC,EAAAgE,kBAOAhE,EAAAiE,mBAOAjE,EAAAuG,YAAA,SAA4BpE,EAAM0B,GAChC,OAAGA,EAASvB,QAAQ,UAAY,EACvB2B,EAAiB9B,GACjB0B,EAASvB,QAAQ,SAAW,EAC5B0B,EAAgB7B,GAEhBA,GAIXnC,EAAAwG,cAAA,SAA8BnD,GAC5B,IAAIoD,EAAa,GACbrC,EAAYhB,EAAqBC,GAIrC,OAHGe,IACDqC,EAAarC,EAAY,iBAEpBqC,GAGTzG,EAAA0G,aAAA,SAA6BrD,GAC3B,IAAIsD,EAAY,GACZvC,EAAYhB,EAAqBC,GAIrC,OAHGe,IACDuC,EAAYvC,EAAY,wBAEnBuC,GAGT3G,EAAA4G,YAAA,SAA4BvD,EAAYwD,GACtC,IAAIC,EAAW,GACX1C,EAAYhB,EAAqBC,GAIrC,OAHGe,IACD0C,EAAW1C,EAAY,6BAA+ByC,GAEjDC,GAGT9G,EAAA+G,aAAA,SAA6B1D,GAC3B,IAAI2D,EAAY,GACZ5C,EAAYhB,EAAqBC,GAIrC,OAHGe,IACD4C,EAAY5C,EAAY,qBAEnB4C,GAGThH,EAAAiH,iBAAA,SAAiC5D,GAC/B,IAAI6D,EAAY,GACZ9C,EAAYhB,EAAqBC,GAKrC,OAJAe,EAAYA,EAAU/B,QAAQ,QAAS,OAErC6E,EAAY9C,EAAY,wBAEnB8C,GAGTlH,EAAAkE,iBASAlE,EAAAqE,aASArE,EAAAmH,eAAA,SAA+B9D,EAAYiB,GACzC,IAAI8C,EAAc,GACd7C,EAAUF,EAAWhB,EAAYiB,GAIrC,OAHGC,IACD6C,EAAc7C,EAAU,SAEnB6C,GAGTpH,EAAAqH,iBAAA,SAAiChE,EAAYiB,GAC3C,IAAI8C,EAAc,GACd7C,EAAUF,EAAWhB,EAAYiB,GAIrC,OAHGC,IACD6C,EAAc7C,EAAU,WAEnB6C,GAGTpH,EAAAsH,oBAAA,SAAoCjE,GAClC,IAAIkE,EAAW,GASf,OARAlE,EAAaD,EAAqBC,MAMhCkE,EAAWlE,EAAa,0BAEnBkE,GAGTvH,EAAAwH,sBAAA,SAAsCnE,EAAYiB,GAChD,IAAI5B,EAAM,GAKV,OAJGW,GAAciB,IAEf5B,GADAW,EAAaD,EAAqBC,IACf,sBAAwBiB,GAEtC5B,GAGT1C,EAAAyH,sBAAA,SAAsCpE,EAAY2B,GAChD,IAAItC,EAAM,GAKV,OAJGW,GAAc2B,IAEftC,GADAW,EAAaD,EAAqBC,IACf,wBAA0B2B,GAExCtC,GAGT1C,EAAA0H,gBAAA,SAAgCrE,GAC9B,IAAIX,EAAM,GACNiF,EAAevE,EAAqBC,GAIxC,OAHGsE,IACDjF,EAAMiF,EAAe,kCAEhBjF,GAGT1C,EAAA4H,qBAAA,SAAqCvE,GACnC,IAAIX,EAAM,GACNiF,EAAetE,GAAc,GAKjC,OAJAsE,EAAevE,EAAqBuE,MAElCjF,EAAMiF,EAAe,8BAEhBjF,GAGT1C,EAAA6H,oBAAA,SAAoCxE,GAClC,IAAIX,EAAM,GACNiF,EAAetE,GAAc,GAKjC,OAJAsE,EAAevE,EAAqBuE,MAElCjF,EAAMiF,EAAe,gCAEhBjF,GAGT1C,EAAAwE,iBASAxE,EAAA0E,aASA1E,EAAA8H,eAAA,SAA+BzE,EAAYsB,GACzC,IAAIoD,EAAc,GACdnD,EAAUF,EAAWrB,EAAYsB,GAIrC,OAHGtB,GAAcsB,IACfoD,EAAcnD,EAAU,SAEnBmD,GAGT/H,EAAAgI,oBAAA,SAAoC5D,EAAW6D,EAAQC,GACrD,IAAIC,EAAe,GACfvD,EAAUF,EAAWN,EAAW6D,GAIpC,OAHGrD,GAAWsD,IACZC,EAAevD,EAAU,SAAWsD,GAE/BC,GAGTnI,EAAA6E,gBASA7E,EAAA+E,oBAaA/E,EAAAoI,sBAAA,SAAsC/E,EAAY2B,EAAOV,GACvD,IAAwB+D,EAAqB,GAK7C,OAJGhF,GAAc2B,GAASV,IAExB+D,EADiBtD,EAAkB1B,EAAY2B,GACT,UAAYV,GAE7C+D,GAGTrI,EAAAsI,mBAAA,SAAmCjF,EAAYiB,EAASiE,GACtD,IAAIzD,EAAa,GAAG0D,EAAkB,GAStC,OARGnF,GAAciB,IACfQ,EAAaD,EAAcxB,GAEzBmF,EADCD,EACiBzD,EAAa,UAAYR,EAAU,cAAgBiE,EAEnDzD,EAAa,UAAYR,EAAU,cAGlDkE,GAGTxI,EAAAyI,cAAA,SAA8BpF,EAAY2B,EAAOC,GAC/C,IAAyByD,EAAa,GAKtC,OAJGrF,GAAc2B,IAEf0D,EADiB3D,EAAkB1B,EAAY2B,EAAOC,GACxB,YAEzByD,GAGT1I,EAAA2I,iBAAA,SAAiCtF,EAAY2B,EAAOV,GAClD,IAAIsE,EAAgB,GAChBxD,EAAeD,EAAgB9B,EAAY2B,GAI/C,OAHGI,IACDwD,EAAgBxD,EAAe,IAAMd,EAAU,WAE1CsE,GAIT5I,EAAAmF,kBASAnF,EAAA6I,iBAAA,SAAiCxF,EAAY2B,EAAOV,EAASW,GAC3D,IAAuB6D,EAAa,GAKpC,OAJGzF,GAAc2B,IAEf8D,EADe3D,EAAgB9B,EAAY2B,EAAOC,GACtB,IAAMX,EAAU,WAEvCwE,GAGT9I,EAAA+I,aAAA,SAA6B1F,EAAY2B,EAAOV,EAASW,GACvD,IAAuB8D,EAAe,GAKtC,OAJG1F,GAAc2B,IAEf+D,EADe5D,EAAgB9B,EAAY2B,EAAOC,GACpB,IAAMX,EAAU,UAEzCyE,GAGT/I,EAAAgJ,gBAAA,SAAgC3F,GAC9B,IAAIX,EAAM,GACNiF,EAAevE,EAAqBC,GAIxC,OAHGsE,IACDjF,EAAMiF,EAAe,oBAEhBjF,GAGT1C,EAAAiJ,oBAAA,SAAoC5F,EAA2B6F,GAC7D,IAAIxG,EAAM,GACNiF,EAAevE,EAAqBC,GAUxC,OATGsE,IACDjF,EAAMiF,EAAe,2BAEnBjF,GADCwG,EACM,WAAaA,EAGb,kBAGJxG,GAGT1C,EAAAmJ,sBAAA,SAAsC9F,EAA2B6F,GAC/D,IAAIxG,EAAM,GACNiF,EAAevE,EAAqBC,GAOxC,OANGsE,IACDjF,EAAMiF,EAAe,6BAClBuB,IACDxG,GAAO,aAAewG,IAGnBxG,GAGT1C,EAAAoJ,kBAAA,SAAkC/F,GAChC,IAAIX,EAAM,GACNiF,EAAevE,EAAqBC,GAIxC,OAHGsE,IACDjF,EAAMiF,EAAe,sBAEhBjF,GAGT1C,EAAAqJ,iBAAA,SAAiChG,GAC/B,IAAIX,EAAM,GACNiF,EAAevE,EAAqBC,GAIxC,OAHGsE,IACDjF,EAAMiF,EAAe,qBAEhBjF,GAGT1C,EAAAsJ,oBAAA,SAAoCjG,GAClC,IAAIX,EAAM,GACNiF,EAAevE,EAAqBC,GAIxC,OAHGsE,IACDjF,EAAMiF,EAAe,sBAEhBjF,GAGT1C,EAAAuJ,yBAAA,SAAyClG,GACvC,IAAIX,EAAM,GACNiF,EAAevE,EAAqBC,GAIxC,OAHGsE,IACDjF,EAAMiF,EAAe,2BAEhBjF,GAGT1C,EAAAwJ,eAAA,SAA+BnG,GAC7B,IAAIX,EAAM,GACNiF,EAAevE,EAAqBC,GAIxC,OAHGsE,IACDjF,EAAMiF,EAAe,mBAEhBjF,GAIT1C,EAAAyJ,iBAAA,SAAiCpG,EAAYqG,GAC3C,IAAIhH,EAAM,GACNiF,EAAevE,EAAqBC,GAKxC,OAJGsE,IAEDjF,EAAMiF,EAAe,gBADb+B,GAAU,MACwB,kBAErChH,GAGT1C,EAAA2J,sBAAA,SAAsCtG,EAAYqG,GAChD,IAAIhH,EAAM,GACNiF,EAAevE,EAAqBC,GAKxC,OAJGsE,IAEDjF,EAAMiF,EAAe,gBADb+B,GAAU,MACwB,gBAErChH,GAGT1C,EAAA4J,kBAAA,SAAkCvG,GAIhC,IAAIX,EAAM,GACNiF,EAAevE,EAAqBC,GAIxC,OAHGsE,IACDjF,EAAMiF,EAAe,kBAEhBjF,GAGT1C,EAAA6J,oBAAA,SAAoCxG,GAClC,IAAIyG,EAAa,GACb1F,EAAYhB,EAAqBC,GAIrC,OAHGe,IACD0F,EAAa1F,EAAY,gCAEpB0F,GAGT9J,EAAA+J,eAAA,SAA+B1G,GAC7B,IAAIX,EAAM,GACNiF,EAAevE,EAAqBC,GAKxC,OAJGsE,IAEDjF,GADAiF,EAAe3D,EAAgB2D,IACV,2BAEhBjF,GAGT1C,EAAAgK,qBAAA,SAAqC3G,EAAY4G,EAAwBC,GACvE,IAAIxH,EAAM,GACN0B,EAAYhB,EAAqBC,GAUrC,OATGe,IACD1B,EAAM0B,EAAY,sDAAwD6F,EACvEC,IACDxH,GAAO,iBAAmBwH,IAG3BxH,IACDA,EAAMuB,EAAiBvB,IAElBA,kBC5mBTzC,EAAAD,QAAAmK,iBCAAlK,EAAAD,QAAAoK,iBCAAnK,EAAAD,QAAAqK,iBCAApK,EAAAD,QAAAsK,iBCAArK,EAAAD,QAAAuK,iBCAAtK,EAAAD,QAAAwK,wZCAA,IAAAC,EAAA3K,EAAA,GACA4K,EAAA5K,EAAA,GAEA6K,EAAA7K,EAAA,GACA8K,EAAA9K,EAAA,GACA+K,EAAA/K,EAAA,GAEAgL,EAAAhL,EAAA,GAEIiL,KAEJC,EAAA,SAAAC,GAAA,SAAAD,mDA0DA,OA1DgCE,EAAAF,EAAAC,GAC9BD,EAAAlJ,UAAAqJ,QAAA,SAAQjC,GACN,IAAI3E,EAAUuG,EAAezG,WAAW+G,KAAK1I,IAAKwG,GAC9CmC,GACFC,aAAc,OACdC,OACEC,EAAG,QAELC,kBAAmB,YAOrB,OAJGL,KAAKM,aACNL,EAAeE,MAAMI,MAAQP,KAAKM,YAG7Bb,EAAYtG,EAAS8G,GAAgBO,KAAK,SAAAC,GAE/C,OADiB,IAAInB,EAAWmB,EAAIC,SAKxCd,EAAAlJ,UAAAiK,YAAA,SAAY7C,GACV,IAAI9B,EAAc0D,EAAe3D,eAAeiE,KAAK1I,IAAKwG,GACtDmC,GACFC,aAAc,OACdC,OACEC,EAAG,QAELC,kBAAmB,YAOrB,OAJGL,KAAKM,aACNL,EAAeE,MAAMI,MAAQP,KAAKM,YAG7Bb,EAAYzD,EAAaiE,GAAgBO,KAAK,SAAAC,GACnD,OAAOA,EAAIC,QAUfd,EAAAlJ,UAAA4J,SAAA,WACE,IAAIN,KAAKY,KACP,OAAO,KAGT,IAAIC,EAAOrB,EAAgBsB,eAAed,KAAK1I,IAAK0I,KAAKY,KAAKG,UAC9D,OAAIF,EAIGA,EAAKN,MAHH,MAKbX,EA1DA,CAAgCP,GA4DhC,SAAA2B,EAA0BhI,GACxB,YADwB,IAAAA,MAAoBuG,EAAWvG,WAChD2G,EAAQ3G,GA7DJpE,EAAAgL,aA4DbhL,EAAAoM,YAIApM,EAAAqM,aAAA,SAA6BjI,GAC3B,QAD2B,IAAAA,MAAoBuG,EAAWvG,WACvD2G,EAAQ3G,GACT,OAAG2G,EAAQ3G,GAAWkI,OACbC,QAAQC,QAAQzB,EAAQ3G,IAExB2G,EAAQ3G,GAAWqI,OAAOb,KAAK,SAAAc,GAAU,OAAAA,IAGlD,IAAIA,EAAS,IAAI1B,GAAYtI,IAAK0B,IAElC,OADA2G,EAAQ3G,GAAasI,EACd3B,EAAQ3G,GAAWqI,OAAOb,KAAK,SAAAc,GAAU,OAAAA,KAIpD1M,EAAA2M,oBAAA,SAAoCvI,EAAmBwI,EAAkBC,GACvE,IACIC,GACFvB,MAFM,SAAWqB,EAAW,UAAYC,GAK1C,OAAOT,EAAUhI,GAAW2I,WAAWD,GAA6BlB,KAAK,SAASoB,GAChF,OAAGA,EAAYC,MAAQ,KAQ3BjN,EAAAkN,mBAAA,SAAmC7J,GACjC,IAAIe,EAAY0G,EAAe1H,qBAAqBC,GACpD,OAkCF,SAAkCA,GAChC,IACIqJ,EAASN,EADGtB,EAAe1H,qBAAqBC,IAMhD8J,GACF5B,MAFM,oDAoIV,SAAmC6B,GACjC,IAAIC,EAAW,GACXC,EA/BN,WACE,IAAIA,KAyBJ,OADAA,GAFAA,EAAWA,EAASC,QApBP,UAAW,YAAa,yBAoBHA,QAnBnB,kBAAmB,cAAe,gBAAiB,MAAO,MACzE,qBAAsB,8BAA+B,kBAAmB,kBAkBtBA,QAjBpC,mBAAoB,oBAAqB,2BACvD,0BAiBCA,QAhBoB,0BAA2B,qBAAsB,kBACtE,8BAA+B,mBAeRA,QAdL,aAAc,YAAa,YAAa,MAAO,qBACjE,gBAAiB,iBAAkB,uBAAwB,kBAAmB,MAC9E,QAAS,oBAaWA,QAXP,eAAgB,cAAe,eAAgB,iBAC5D,eAAgB,iBAAkB,iBAAkB,gBAAiB,eACrE,2BASkCA,QARnB,QAAS,gBAAiB,mBAQSA,QAPpC,wBAAyB,uBAAwB,kBAC/D,iBAMiEA,QAL5C,2BAA4B,sBACjD,+BAAgC,cAAe,iBAAkB,oBAUlDC,GACf,GAAIJ,GAAaA,EAAUK,OAAS,GAC9BL,EAAUK,OAAS,EAAG,CACxB,IAAIC,EAAW,GACfN,EAAUO,QAAQ,SAASC,EAAMC,GAC/B,IAAI5L,EAAI,UAAY2L,EAAO,KAC3BF,GAAYzL,EACR4L,IAAUT,EAAUK,OAAS,IAC/BC,GAAY,UAGhBL,EAAW,MAAQK,EAAW,MAC9B,IAAII,EAAcV,EAAUG,OAAOD,GAC/BS,EAAeD,EAAYE,OAAO,SAASC,GAC7C,OAAOb,EAAUc,MAAM,SAASC,GAC9B,OAAOA,EAASlL,cAAcX,QAAQ2L,EAAYhL,eAAiB,MAIvE8K,EAAaJ,QAAQ,SAASC,GAC5B,IAAI3L,EAAI,WAAa2L,EAAO,KAC5BP,GAAYpL,IAIlB,OAAOoL,EAlKsBe,EAA2B,cAAgB,KAOxE,OAAO1B,EAAOK,WAAWI,GAA2BvB,KAAK,SAASyC,GAChE,OAAGA,GAAYA,EAASC,SAAWD,EAASC,QAAQb,OAAS,EACpDY,EAASC,QAAQ,GAAGC,GAEpB,OAhDJC,CAAyBpK,GAAWwH,KAAK,SAAS6C,GACvD,OAAGA,GAoDP,SAAkCrK,GAGhC,OAFAA,EAAY0G,EAAe1H,qBAAqBgB,GACnCgH,KAAKgB,UAAUhI,GACdsK,UAAU9C,KAAK,SAASI,GACpC,IAIIF,GACF6C,qBACAC,SACEL,GAAM,wBACNM,MAAS,cACTC,gBACEP,GAAM,iBACN7L,IAXK,gFAYLqM,UAAa,+BAEfC,kBACET,GAAM,kBACN7L,IAdK,4FAeLqM,UAAa,sCAGjBE,QAAW,MACXC,aAAgB,iBAChBC,oBAAuB,WACvBC,kBACEC,KAAQ,OACRC,WAAc,MAEhBC,YAAe,SACfC,cACEC,WACEC,MAAS,mBACTC,SAAY,EACZC,gBACEC,EAAK,mBACLC,EAAK,kBACLV,kBACEC,KAAQ,OACRC,WAAc,MAEhBS,GAAM,mBAERC,QACEC,UACEJ,EAAK,mBACLC,EAAK,kBACLV,kBACEC,KAAQ,OACRC,WAAc,MAEhBS,EAAK,mBAEPG,QAAW,EACXC,KAAQ,oBAGZC,aACEC,UACEC,SAAY,aACZC,iBAAoB,KAI1BC,cACEC,YAIAtD,GACF0B,MAAO,oBACPjB,KAAM,YACN8C,aAAc,qBACdC,KAAM,UACNC,KANSC,KAAKC,UAAUhF,GAOxBiF,QAAS,IAEX,OAAO/E,EAAKgF,QAAQ7D,EAAM,IAAIvB,KAAK,SAASyC,GAC1C,OAAIA,EAAS4C,QACJ5C,EAASE,IAEhB2C,QAAQC,MAAM,kCAAmC9C,GAC1C9B,QAAQ6E,OAAO/C,QArIjBgD,CAAyBjN,GAChCwH,KAAK,SAAS6C,GAsBV,OArBWrC,EAAUhI,GAEL4H,KAmBTyC,6ZCrIjB,IAmBY6C,EAnBZC,EAAAzR,EAAA,GAIA0R,EAAA1R,EAAA,IACA2R,EAAA3R,EAAA,GACA4R,EAAA5R,EAAA,IAOA6R,EAAA7R,EAAA,IAEA4K,EAAA5K,EAAA,GACA8R,EAAA9R,EAAA,GACA+R,EAAA/R,EAAA,IAEA,SAAYwR,GACVA,EAAA,UACAA,EAAA,iBACAA,EAAA,qBAEAA,EAAA,uBACAA,EAAA,2BAEAA,EAAA,6BACAA,EAAA,sCATF,CAAYA,EAAAtR,EAAAsR,kBAAAtR,EAAAsR,qBAYZ,IAAAQ,EAAA,SAAA7G,GAKE,SAAA6G,EAAYC,EAA4BC,GAAxC,IAAAC,EACEhH,EAAA5K,KAAA+K,OAAOA,YALT6G,EAAArE,KAAe0D,EAAgBE,IAE/BS,EAAAC,iBAAkB,EAIhBD,EAAKD,IAAMA,IAkBf,OAzBmC9G,EAAA4G,EAAA7G,GAUjC6G,EAAAhQ,UAAAqQ,KAAA,aAIAL,EAAAhQ,UAAAsQ,eAAA,WAEE,OAAOhH,KAAK4G,IAAIK,OAAOC,UAAUN,IAAI,SAAAO,GACnC,IAAIR,GACFxD,GAAIgE,EAAMhE,IAEZ,OAAO,IAAIiE,EAAuBT,EAAUQ,MAIhDT,EAAAhQ,UAAA2Q,cAAA,aACFX,EAzBA,CAAmCP,EAAAmB,oBAAtB1S,EAAA8R,gBA2Bb,IAAAa,EAAA,SAAA1H,GAKE,SAAA0H,EAAYZ,EAA4Ba,GAAxC,IAAAX,EACEhH,EAAA5K,KAAA+K,OAAOA,YALT6G,EAAArE,KAAe0D,EAAgBG,OAE/BQ,EAAAC,iBAAkB,EAIhBD,EAAKW,OAASA,IAoBlB,OA3BsC1H,EAAAyH,EAAA1H,GAUpC0H,EAAA7Q,UAAAqQ,KAAA,aAIAQ,EAAA7Q,UAAAsQ,eAAA,WASE,UAGFO,EAAA7Q,UAAA2Q,cAAA,aACFE,EA3BA,CAAsCpB,EAAAmB,oBAAzB1S,EAAA2S,mBA6Bb,IAAAE,EAAA,SAAA5H,GAKE,SAAA4H,EAAYd,EAA4Be,GAAxC,IAAAb,EACEhH,EAAA5K,KAAA+K,OAAOA,YALT6G,EAAArE,KAAe0D,EAAgBI,SAE/BO,EAAAC,iBAAkB,EAIhBD,EAAKa,SAAWA,IAWpB,OAlBwC5H,EAAA2H,EAAA5H,GAUtC4H,EAAA/Q,UAAAqQ,KAAA,aAEAU,EAAA/Q,UAAAsQ,eAAA,WAEE,UAGFS,EAAA/Q,UAAA2Q,cAAA,aACFI,EAlBA,CAAwCtB,EAAAmB,oBAA3B1S,EAAA6S,qBAoBb,IAAAE,EAAA,SAAA9H,GAYE,SAAA8H,EAAYhB,EAA4BiB,GAAxC,IAAAf,EACEhH,EAAA5K,KAAA+K,OAAOA,YAZT6G,EAAArE,KAAe0D,EAAgB2B,QAE/BhB,EAAAC,iBAAkB,EAKlBD,EAAAiB,wBAMEjB,EAAKkB,QAAQH,GACbf,EAAK1D,GAAKwD,EAASxD,KAmEvB,OAlFoCrD,EAAA6H,EAAA9H,GAkBlC8H,EAAAjR,UAAAqQ,KAAA,aAEAY,EAAAjR,UAAAsQ,eAAA,WAEE,UAGFW,EAAAjR,UAAAqR,QAAA,SAAQH,GAAR,IAAAf,EAAA7G,KACK4H,IACD5H,KAAK4H,QAAUA,EACfA,EAAQI,KAAK,WACXnB,EAAKoB,aAAazB,EAAA0B,iBAAiBC,YAKzCR,EAAAjR,UAAA0R,+BAAA,SAA+BC,GAC7B,IAAIrI,KAAK4H,SAAiD,IAAtC5H,KAAK4H,QAAQU,cAAcjG,OAAc,OAAO,KAEpE,GAAGrC,KAAK8H,qBAAqBO,GAC3B,OAAOrI,KAAK8H,qBAAqBO,GAGnC,IAAIE,EAAYvI,KAAK4H,QAAQU,cAAcE,KAAK,SAAAC,GAC9C,OAAOA,EAAKtB,MAAMhE,KAAOkF,IAE3B,IAAIE,EAAW,OAAO,KAEtB,IAAI5B,GACFxD,GAAIoF,EAAUpB,MAAMhE,IAElBuF,EAAe,IAAIC,EAA2BhC,EAAU4B,GAI5D,OADAvI,KAAK8H,qBAAqBO,GAAWK,EAC9BA,GAGTf,EAAAjR,UAAAkS,aAAA,SAAanG,EAAc4F,GACzB,GAAG5F,IAAUzC,KAAK6I,eAAe,GAAjC,CACA,IAAIC,EAA0C9I,KAAKoI,+BAA+BC,GAClFrI,KAAK+I,iBAAmBD,EACxB9I,KAAK6I,gBAAkBpG,GACvBzC,KAAKgJ,kBAAkBC,kCAAkCjJ,KAAKmD,IAAKV,MAGrEkF,EAAAjR,UAAAwS,gBAAA,SAAgBC,EAAkBd,GAChC,IAAIS,EAA0C9I,KAAKoI,+BAA+BC,GAC9Ee,EAAUN,EAAYO,uBAAuBC,aACjD,GAAIR,GAAgBM,EAApB,CACA,IAAI3G,EAAQ2G,EAAQG,UAAU,SAAA3T,GAC5B,OAAOA,EAAE4T,QAAQC,WAAWX,EAAYO,uBAAuBK,aAAaC,iBAAmBR,IAEjGnJ,KAAK4I,aAAanG,EAAO4F,GACtBrI,KAAK4J,mBAAmB5J,KAAK4J,kBAAkBC,SAClD7J,KAAK4J,kBAAoBd,EAAYgB,iBAAiBC,UAAUZ,KAGlExB,EAAAjR,UAAAsT,iBAAA,WACE,YAA2BC,IAAxBjK,KAAK6I,qBAA2DoB,IAA3BjK,KAAK6I,eAAe,IAAqB7I,KAAK+I,iBAC/E/I,KAAK+I,iBAAiBO,aAAatJ,KAAK6I,eAAe,IADiD,MAIjHlB,EAAAjR,UAAA2Q,cAAA,aACFM,EAlFA,CAAoCxB,EAAAmB,oBAAvB1S,EAAA+S,iBAoFb,IAAAuC,EAAA,SAAArK,GAAA,SAAAqK,IAAA,IAAArD,EAAA,OAAAhH,KAAAsK,MAAAnK,KAAAoK,YAAApK,YACE6G,EAAArE,KAAe0D,EAAgB2B,UACjC,OAFuC/H,EAAAoK,EAAArK,GAEvCqK,EAFA,CAAuCvC,GAA1B/S,EAAAsV,oBAIb,IAAAG,EAAA,SAAAxK,GAAA,SAAAwK,IAAA,IAAAxD,EAAA,OAAAhH,KAAAsK,MAAAnK,KAAAoK,YAAApK,YACE6G,EAAArE,KAAe0D,EAAgBoE,YACjC,OAFyCxK,EAAAuK,EAAAxK,GAEzCwK,EAFA,CAAyC1C,GAA5B/S,EAAAyV,sBAIb,IAAAE,EAAA,WAIE,SAAAA,EAAYC,GACVxK,KAAKwJ,QAAUgB,EAMnB,OAHED,EAAA7T,UAAA+T,QAAA,WACE,OAAOzK,KAAKwJ,QAAQC,YAExBc,EAXA,GAAa3V,EAAA2V,oBAab,IAAAG,EAAA,SAAA7K,GAGE,SAAA6K,EAAY/D,EAA4BgE,GAAxC,IAAA9D,EACEhH,EAAA5K,KAAA+K,OAAOA,YACP6G,EAAK8D,WAAaA,EAClB9D,EAAKuC,QAAUvC,EAAK8D,WAAWC,SAAShE,IAAI,SAAAxG,GAAK,WAAImK,EAAkBnK,OAQ3E,OAd0CN,EAAA4K,EAAA7K,GASxC6K,EAAAhU,UAAAqQ,KAAA,aAIA2D,EAAAhU,UAAA2Q,cAAA,aACFqD,EAdA,CAA0CvE,EAAAmB,oBAA7B1S,EAAA8V,uBAgBb,IAAAtD,EAAA,SAAAvH,GAIE,SAAAuH,EAAYT,EAA4B+C,GAAxC,IAAA7C,EACEhH,EAAA5K,KAAA+K,OAAOA,YACP6G,EAAK6C,aAAeA,EACpB7C,EAAKvP,IAAMoS,EAAapS,IACxBuP,EAAKrE,KAAO0D,EAAgBK,aAC5BM,EAAK1D,GAAKwD,EAASxD,KA4BvB,OArC4CrD,EAAAsH,EAAAvH,GAY1CuH,EAAA1Q,UAAAqQ,KAAA,WACE/G,KAAKiI,aAAazB,EAAA0B,iBAAiB2C,WAGrCzD,EAAA1Q,UAAAyJ,MAAA,SAAMA,GAAN,IAAA0G,EAAA7G,KAME,OALIA,KAAK8K,QAAU9K,KAAK8K,SAAWtE,EAAA0B,iBAAiB2C,SAGlD7K,KAAKiI,aAAazB,EAAA0B,iBAAiB6C,eAFnC/K,KAAKiI,aAAazB,EAAA0B,iBAAiB8C,iBAI9BhL,KAAK0J,aAAauB,cAAc9K,GAAOK,KAAK,SAAAmK,GACjD,IAAIvB,EAAUuB,EAAWC,SAAShE,IAAI,SAAAxG,GAAK,WAAImK,EAAkBnK,KAGjE,OAFAyG,EAAKuC,QAAUA,EACfvC,EAAKoB,aAAazB,EAAA0B,iBAAiBC,QAC5BiB,KAIXhC,EAAA1Q,UAAAkS,aAAA,SAAanG,GACXzC,KAAK6I,gBAAkBpG,GACvBzC,KAAKgJ,kBAAkBC,kCAAkCjJ,KAAKmD,IAAKV,KAGrE2E,EAAA1Q,UAAA2Q,cAAA,aAEFD,EArCA,CAA4CjB,EAAAmB,oBAA/B1S,EAAAwS,yBAuCb,IAAAuB,EAAA,SAAA9I,GAIE,SAAA8I,EAAYhC,EAA4BmD,GAAxC,IAAAjD,EACEhH,EAAA5K,KAAA+K,OAAOA,YAEP6G,EAAKiD,iBAAmBA,EACxBjD,EAAKrE,KAAO0D,EAAgBgF,iBAC5BrE,EAAK1D,GAAKwD,EAASxD,GACnB0D,EAAKwC,uBAAyB,IAAIjC,GAChCjE,GAAI2G,EAAiB3C,MAAMhE,IACN2G,EAAiB3C,SAgB5C,OA5BgDrH,EAAA6I,EAAA9I,GAe9C8I,EAAAjS,UAAAqQ,KAAA,aAGA4B,EAAAjS,UAAA4S,WAAA,WACE,OAAOtJ,KAAKqJ,uBAAuBC,cAGrCX,EAAAjS,UAAAsT,iBAAA,WACE,OAAOhK,KAAKqJ,uBAAuBW,oBAGrCrB,EAAAjS,UAAA2Q,cAAA,aAEFsB,EA5BA,CAAgDxC,EAAAmB,oBAAnC1S,EAAA+T,6BA8Bb,IAAAwC,EAAA,oBAAAA,IACEnL,KAAAmD,GAAa,6BA8Gf,OA5GEgI,EAAAzU,UAAA0U,0BAAA,WACE,OAAQlF,EAAgBE,IAAKF,EAAgBG,OAAQH,EAAgBK,aACnEL,EAAgBI,SAAUJ,EAAgB2B,QAAS3B,EAAgBoE,YAGvEa,EAAAzU,UAAA2U,iBAAA,SAAiB1E,GACf,OAAGA,EAASnE,OAAS0D,EAAgBE,IAC5BpG,KAAKsL,oBAAoB3E,GACzBA,EAASnE,OAAS0D,EAAgBK,aAClCvG,KAAKuL,6BAA6B5E,GAClCA,EAASnE,OAAS0D,EAAgBG,OAClCrG,KAAKwL,uBAAuB7E,GAC5BA,EAASnE,OAAS0D,EAAgBI,SAClCtG,KAAKyL,yBAAyB9E,GAC9BA,EAASnE,OAAS0D,EAAgB2B,QAClC7H,KAAK0L,wBAAwB/E,GAC7BA,EAASnE,OAAS0D,EAAgBoE,UAClCtK,KAAK2L,0BAA0BhF,QAGtCb,QAAQC,MAAM,kCAAmCY,EAASnE,OAItD2I,EAAAzU,UAAA4U,oBAAR,SAA4B3E,GAC1B,IAAIC,EAAM,IAAIR,MAQd,OALAO,EAASM,OAAO1E,QAAQ,SAAA4E,GACtBP,EAAIK,OAAO2E,IAAI,IAAIrF,EAAaY,MAGtB,IAAIT,EAAcC,EAAUC,IAIlCuE,EAAAzU,UAAA8U,uBAAR,SAA+B7E,GAC7B,IAAIa,EACJ,GAAGb,EAAS3N,UAAU,CACpB,IAAIsI,EAAS,IAAImF,EAAA7G,YACftI,IAAKqP,EAAS3N,YAEhBwO,EAAS,IAAInB,GACXwF,WAAY,IAAIvM,GACd6D,GAAIwD,EAAS7I,OACbwD,OAAQA,WAIZkG,EAAS,IAAInB,GACXwF,WAAY,IAAIvM,GACd6D,GAAIwD,EAAS7I,WAMnB,OADe,IAAIyJ,EAAiBZ,EAAUa,IAIxC2D,EAAAzU,UAAA+U,yBAAR,SAAiC9E,GAC/B,IAAIe,EACJ,GAAGf,EAAS3N,UAAU,CACpB,IAAIsI,EAAS,IAAImF,EAAA7G,YACftI,IAAKqP,EAAS3N,YAEhB0O,EAAW,IAAIpB,GACbuF,WAAY,IAAIvM,GACd6D,GAAIwD,EAAS7I,OACbwD,OAAQA,WAIZoG,EAAW,IAAIpB,GACbuF,WAAY,IAAIvM,GACd6D,GAAIwD,EAAS7I,WAMnB,OADiB,IAAI2J,EAAmBd,EAAUe,IAI5CyD,EAAAzU,UAAAgV,wBAAR,SAAgC/E,GAI9B,OADgB,IAAIuD,EAAkBvD,OAFlCiB,IAMEuD,EAAAzU,UAAAiV,0BAAR,SAAkChF,GAIhC,OADkB,IAAI0D,EAAoB1D,OAFtCmF,IAMEX,EAAAzU,UAAA6U,6BAAR,SAAqC5E,GACnC,IAAI+C,EAMJ,OALAA,EAAe,IAAInD,GACjBjP,IAAKqP,EAASrP,MAGK,IAAI8P,EAAuBT,EAAU+C,IAI9DyB,EA/GA,GAAavW,EAAAuW,4CCzSbtW,EAAAD,QAAAmX,mBCAAlX,EAAAD,QAAAoX,iBCAAnX,EAAAD,QAAAqX,iBCAApX,EAAAD,QAAAsX,iBCAArX,EAAAD,QAAAuX,gCCWA,SAAAC,EAAAC,GACA,kBACA,OAAAA,GASA,IAAAC,EAAA,aAEAA,EAAAC,YAAAH,EACAE,EAAAE,iBAAAJ,GAAA,GACAE,EAAAG,gBAAAL,GAAA,GACAE,EAAAI,gBAAAN,EAAA,MACAE,EAAAK,gBAAA,WACA,OAAA3M,MAEAsM,EAAAM,oBAAA,SAAAP,GACA,OAAAA,GAGAxX,EAAAD,QAAA0X,gCCnBAzX,EAAAD,yCCKA,IAAAiY,EAAA,SAAAC,KA+BAjY,EAAAD,QArBA,SAAAmY,EAAAD,EAAAE,EAAAC,EAAA9X,EAAAC,EAAA8X,EAAA9M,GAGA,GAFAyM,EAAAC,IAEAC,EAAA,CACA,IAAAhH,EACA,QAAAkE,IAAA6C,EACA/G,EAAA,IAAAoH,MAAA,qIACK,CACL,IAAApL,GAAAiL,EAAAC,EAAA9X,EAAAC,EAAA8X,EAAA9M,GACAgN,EAAA,GACArH,EAAA,IAAAoH,MAAAL,EAAA7V,QAAA,iBACA,OAAA8K,EAAAqL,SAEA/X,KAAA,sBAIA,MADA0Q,EAAAsH,YAAA,EACAtH;;;;;ECxCA,IAAAuH,EAAA9X,OAAA8X,sBACA3W,EAAAnB,OAAAkB,UAAAC,eACA4W,EAAA/X,OAAAkB,UAAA8W,qBAsDA3Y,EAAAD,QA5CA,WACA,IACA,IAAAY,OAAAiY,OACA,SAMA,IAAAC,EAAA,IAAAC,OAAA,OAEA,GADAD,EAAA,QACA,MAAAlY,OAAAoY,oBAAAF,GAAA,GACA,SAKA,IADA,IAAAG,KACA/Y,EAAA,EAAiBA,EAAA,GAAQA,IACzB+Y,EAAA,IAAAF,OAAAG,aAAAhZ,MAKA,kBAHAU,OAAAoY,oBAAAC,GAAAjH,IAAA,SAAArQ,GACA,OAAAsX,EAAAtX,KAEAwX,KAAA,IACA,SAIA,IAAAC,KAIA,MAHA,uBAAA5W,MAAA,IAAAmL,QAAA,SAAA0L,GACAD,EAAAC,OAGA,yBADAzY,OAAA0Y,KAAA1Y,OAAAiY,UAAkCO,IAAAD,KAAA,IAMhC,MAAAI,GAEF,UAIAC,GAAA5Y,OAAAiY,OAAA,SAAAY,EAAAC,GAKA,IAJA,IAAAC,EAEAC,EADAC,EAtDA,SAAAC,GACA,UAAAA,QAAAzE,IAAAyE,EACA,UAAAC,UAAA,yDAGA,OAAAnZ,OAAAkZ,GAiDAE,CAAAP,GAGAxX,EAAA,EAAgBA,EAAAuT,UAAA/H,OAAsBxL,IAAA,CAGtC,QAAAR,KAFAkY,EAAA/Y,OAAA4U,UAAAvT,IAGAF,EAAA1B,KAAAsZ,EAAAlY,KACAoY,EAAApY,GAAAkY,EAAAlY,IAIA,GAAAiX,EAAA,CACAkB,EAAAlB,EAAAiB,GACA,QAAAzZ,EAAA,EAAkBA,EAAA0Z,EAAAnM,OAAoBvN,IACtCyY,EAAAtY,KAAAsZ,EAAAC,EAAA1Z,MACA2Z,EAAAD,EAAA1Z,IAAAyZ,EAAAC,EAAA1Z,MAMA,OAAA2Z;;;;;;;;GC/Ea,IAAAI,EAAAna,EAAA,IAAA6B,EAAA7B,EAAA,IAAAkC,EAAAlC,EAAA,IAAAoa,EAAApa,EAAA,IAAAkB,EAAA,mBAAAC,eAAAkZ,IAAA/Y,EAAAJ,EAAAC,OAAAkZ,IAAA,uBAAAC,EAAApZ,EAAAC,OAAAkZ,IAAA,sBAAAE,EAAArZ,EAAAC,OAAAkZ,IAAA,wBAAAG,EAAAtZ,EAAAC,OAAAkZ,IAAA,2BAAAtK,EAAA7O,EAAAC,OAAAkZ,IAAA,wBAAArK,EAAA9O,EAAAC,OAAAkZ,IAAA,wBAAApK,EAAA/O,EAAAC,OAAAkZ,IAAA,uBAAAI,EAAAvZ,EAAAC,OAAAkZ,IAAA,0BAAAK,EACbxZ,EAAAC,OAAAkZ,IAAA,2BAAwCnZ,GAAAC,OAAAkZ,IAAA,iBAA+B,IAAAM,EAAA,mBAAAxZ,eAAAyZ,SAAkD,SAAAC,EAAAvC,GAAc,QAAAC,EAAA7C,UAAA/H,OAAA,EAAA6K,EAAA,yDAAAF,EAAA7X,EAAA,EAA8FA,EAAA8X,EAAI9X,IAAA+X,GAAA,WAAAsC,mBAAApF,UAAAjV,EAAA,IAAqDoB,GAAA,2BAAAyW,EAAA,4HAAkCE,GAChU,IAAAuC,GAAOC,UAAA,WAAqB,UAASC,mBAAA,aAAgCC,oBAAA,aAAiCC,gBAAA,cAA+B,SAAAC,EAAA9C,EAAAC,EAAAC,GAAkBlN,KAAA+P,MAAA/C,EAAahN,KAAAgQ,QAAA/C,EAAejN,KAAAiQ,KAAArZ,EAAYoJ,KAAAkQ,QAAAhD,GAAAuC,EAAsS,SAAAU,KAC7c,SAAAC,EAAApD,EAAAC,EAAAC,GAAkBlN,KAAA+P,MAAA/C,EAAahN,KAAAgQ,QAAA/C,EAAejN,KAAAiQ,KAAArZ,EAAYoJ,KAAAkQ,QAAAhD,GAAAuC,EAD+HK,EAAApZ,UAAA2Z,oBAAgCP,EAAApZ,UAAA4Z,SAAA,SAAAtD,EAAAC,GAAmC,iBAAAD,GAAA,mBAAAA,GAAA,MAAAA,GAAAuC,EAAA,MAAmEvP,KAAAkQ,QAAAL,gBAAA7P,KAAAgN,EAAAC,EAAA,aAAmD6C,EAAApZ,UAAA6Z,YAAA,SAAAvD,GAAoChN,KAAAkQ,QAAAP,mBAAA3P,KAAAgN,EAAA,gBAC9amD,EAAAzZ,UAAAoZ,EAAApZ,UAAoG,IAAA8Z,EAAAJ,EAAA1Z,UAAA,IAAAyZ,EAAwBK,EAAAC,YAAAL,EAAgBvB,EAAA2B,EAAAV,EAAApZ,WAAiB8Z,EAAAE,sBAAA,EAA0B,IAAAC,GAAOC,QAAA,MAAaC,EAAArb,OAAAkB,UAAAC,eAAAma,GAAsCza,KAAA,EAAA0a,KAAA,EAAAC,QAAA,EAAAC,UAAA,GACjP,SAAAC,EAAAlE,EAAAC,EAAAC,GAAkB,IAAA/X,OAAA,EAAAC,KAAiB+b,EAAA,KAAAC,EAAA,KAAe,SAAAnE,EAAA,IAAA9X,UAAA,IAAA8X,EAAA8D,MAAAK,EAAAnE,EAAA8D,UAAA,IAAA9D,EAAA5W,MAAA8a,EAAA,GAAAlE,EAAA5W,KAAA4W,EAAA4D,EAAA5b,KAAAgY,EAAA9X,KAAA2b,EAAAna,eAAAxB,KAAAC,EAAAD,GAAA8X,EAAA9X,IAA4H,IAAAiL,EAAAgK,UAAA/H,OAAA,EAAyB,OAAAjC,EAAAhL,EAAAic,SAAAnE,OAAsB,KAAA9M,EAAA,CAAa,QAAArL,EAAAuc,MAAAlR,GAAAlL,EAAA,EAAuBA,EAAAkL,EAAIlL,IAAAH,EAAAG,GAAAkV,UAAAlV,EAAA,GAAwBE,EAAAic,SAAAtc,EAAa,GAAAiY,KAAAuE,aAAA,IAAApc,KAAAiL,EAAA4M,EAAAuE,kBAAA,IAAAnc,EAAAD,KAAAC,EAAAD,GAAAiL,EAAAjL,IAA4E,OAAOqc,SAAAxb,EAAAwM,KAAAwK,EAAA3W,IAAA8a,EAAAJ,IAAAK,EAAArB,MAAA3a,EAAAqc,OAAAd,EAAAC,SAC7X,SAAAc,EAAA1E,GAAc,uBAAAA,GAAA,OAAAA,KAAAwE,WAAAxb,EAA4J,IAAA2b,EAAA,OAAAC,KAAkB,SAAAC,EAAA7E,EAAAC,EAAAC,EAAA/X,GAAoB,GAAAyc,EAAAvP,OAAA,CAAa,IAAAjN,EAAAwc,EAAAE,MAAsE,OAAxD1c,EAAAqC,OAAAuV,EAAW5X,EAAA2c,UAAA9E,EAAc7X,EAAA4c,KAAA9E,EAAS9X,EAAA4a,QAAA7a,EAAYC,EAAA6c,MAAA,EAAU7c,EAAS,OAAOqC,OAAAuV,EAAA+E,UAAA9E,EAAA+E,KAAA9E,EAAA8C,QAAA7a,EAAA8c,MAAA,GAA+C,SAAAC,EAAAlF,GAAcA,EAAAvV,OAAA,KAAcuV,EAAA+E,UAAA,KAAiB/E,EAAAgF,KAAA,KAAYhF,EAAAgD,QAAA,KAAehD,EAAAiF,MAAA,EAAU,GAAAL,EAAAvP,QAAAuP,EAAAO,KAAAnF,GACpb,SAAAoF,EAAApF,EAAAC,EAAAC,EAAA/X,GAAoB,IAAAC,SAAA4X,EAAe,cAAA5X,GAAA,YAAAA,IAAA4X,EAAA,MAAyC,IAAAmE,GAAA,EAAS,UAAAnE,EAAAmE,GAAA,OAAiB,OAAA/b,GAAe,0BAAA+b,GAAA,EAAiC,MAAM,oBAAAnE,EAAAwE,UAAiC,KAAAxb,EAAA,KAAAgZ,EAAAmC,GAAA,GAAoB,GAAAA,EAAA,OAAAjE,EAAA/X,EAAA6X,EAAA,KAAAC,EAAA,IAAAoF,EAAArF,EAAA,GAAAC,GAAA,EAAgE,GAAvBkE,EAAA,EAAIlE,EAAA,KAAAA,EAAA,IAAAA,EAAA,IAAmBqE,MAAAgB,QAAAtF,GAAA,QAAAoE,EAAA,EAAgCA,EAAApE,EAAA3K,OAAW+O,IAAA,CAAY,IAAAhR,EAAA6M,EAAAoF,EAAPjd,EAAA4X,EAAAoE,GAAOA,GAAeD,GAAAiB,EAAAhd,EAAAgL,EAAA8M,EAAA/X,QAAc,UAAA6X,QAAA,IAAAA,EAAA5M,EAAA,KAAAA,EAAA,mBAAAA,EAAAiP,GAAArC,EAAAqC,IAAArC,EAAA,eAAA5M,EAAA,wBAAAA,EAAA,IAAA4M,EAAA5M,EAAAnL,KAAA+X,GACrWoE,EAAA,IAAIhc,EAAA4X,EAAAuF,QAAAC,MAAmBrB,GAAAiB,EAAAhd,IAAAW,MAAAqK,EAAA6M,EAAAoF,EAAAjd,EAAAgc,KAAAlE,EAAA/X,OAAsC,WAAAC,GAAAma,EAAA,0BAAArC,EAAA,GAAAF,GAAA,qBAA0ExX,OAAA0Y,KAAAlB,GAAAe,KAAA,UAA8Bb,EAAA,IAAS,OAAAiE,EAAS,SAAAkB,EAAArF,EAAAC,GAAgB,uBAAAD,GAAA,OAAAA,GAAA,MAAAA,EAAA3W,IAFrI,SAAA2W,GAAmB,IAAAC,GAAOwF,IAAA,KAAAC,IAAA,MAAmB,cAAA1F,GAAA/V,QAAA,iBAAA+V,GAA6C,OAAAC,EAAAD,KAE2C2F,CAAA3F,EAAA3W,KAAA4W,EAAA2F,SAAA,IAA8E,SAAAC,EAAA7F,EAAAC,GAAgBD,EAAAgF,KAAA/c,KAAA+X,EAAAgD,QAAA/C,EAAAD,EAAAiF,SACrS,SAAAa,EAAA9F,EAAAC,EAAAC,GAAkB,IAAA/X,EAAA6X,EAAAvV,OAAArC,EAAA4X,EAAA+E,UAA6B/E,IAAAgF,KAAA/c,KAAA+X,EAAAgD,QAAA/C,EAAAD,EAAAiF,SAAqCX,MAAAgB,QAAAtF,GAAA+F,EAAA/F,EAAA7X,EAAA+X,EAAA4B,EAAAlC,qBAAA,MAAAI,IAAA0E,EAAA1E,KAAAC,EAAA7X,IAAA4X,EAAA3W,KAAA4W,KAAA5W,MAAA2W,EAAA3W,IAAA,OAAA2W,EAAA3W,KAAAY,QAAA0a,EAAA,YAAAzE,EAAAF,GAAwIwE,SAAAxb,EAAAwM,KAAAwK,EAAAxK,KAAAnM,IAAA4W,EAAA8D,IAAA/D,EAAA+D,IAAAhB,MAAA/C,EAAA+C,MAAA0B,OAAAzE,EAAAyE,SAAqEtc,EAAAgd,KAAAnF,IAAa,SAAA+F,EAAA/F,EAAAC,EAAAC,EAAA/X,EAAAC,GAAsB,IAAA+b,EAAA,GAAS,MAAAjE,IAAAiE,GAAA,GAAAjE,GAAAjW,QAAA0a,EAAA,YAAyC1E,EAAA4E,EAAA5E,EAAAkE,EAAAhc,EAAAC,GAAa,MAAA4X,GAAAoF,EAAApF,EAAA,GAAA8F,EAAA7F,GAAqBiF,EAAAjF,GACxZ,IAAA+F,GAAOC,UAAUrM,IAAA,SAAAoG,EAAAC,EAAAC,GAAoB,SAAAF,EAAA,OAAAA,EAAoB,IAAA7X,KAAyB,OAAhB4d,EAAA/F,EAAA7X,EAAA,KAAA8X,EAAAC,GAAgB/X,GAASoN,QAAA,SAAAyK,EAAAC,EAAAC,GAAyB,SAAAF,EAAA,OAAAA,EAAoBC,EAAA4E,EAAA,UAAA5E,EAAAC,GAAmB,MAAAF,GAAAoF,EAAApF,EAAA,GAAA6F,EAAA5F,GAAqBiF,EAAAjF,IAAKgF,MAAA,SAAAjF,GAAmB,aAAAA,EAAA,EAAAoF,EAAApF,EAAA,GAAA8B,EAAApC,gBAAA,OAAgDxF,QAAA,SAAA8F,GAAqB,IAAAC,KAA2C,OAAlC8F,EAAA/F,EAAAC,EAAA,KAAA6B,EAAAlC,qBAAkCK,GAASiG,KAAA,SAAAlG,GAAuC,OAArB0E,EAAA1E,IAAAuC,EAAA,OAAqBvC,IAAUmG,UAAA,WAAsB,OAAOvC,QAAA,OAAcwC,UAAAtD,EAAAuD,cAAAjD,EAAAkD,cAAA,SAAAtG,EAAAC,GACrP,YAD8S,IAAAA,MAAA,OAAqBD,GAAGwE,SAAA7M,EAC9e4O,sBAAAtG,EAAAuG,cAAAxG,EAAAyG,cAAAzG,EAAA0G,eAAA1G,EAAA2G,aAAA,EAAAC,cAAA,EAAAC,SAAA,KAAAC,SAAA,OAAqID,UAAYrC,SAAA9M,EAAAqP,SAAA/G,GAAuBA,EAAA8G,SAAA9G,GAAoBgH,WAAA,SAAAhH,GAAwB,OAAOwE,SAAApC,EAAA6E,OAAAjH,IAAqBkH,SAAAjF,EAAAkF,WAAAjF,EAAAkF,mBAAAjF,EAAAkF,kBAAA5P,EAAA6P,cAAApD,EAAAqD,aAAA,SAAAvH,EAAAC,EAAAC,IAA+G,OAAAF,QAAA,IAAAA,IAAAuC,EAAA,MAAAvC,GAAuC,IAAA7X,OAAA,EAAAC,EAAAyZ,KAAmB7B,EAAA+C,OAAAoB,EAAAnE,EAAA3W,IAAA+a,EAAApE,EAAA+D,IAAA3Q,EAAA4M,EAAAyE,OAAqC,SAAAxE,EAAA,MAAY,IAAAA,EAAA8D,MAAAK,EAAAnE,EAAA8D,IAAA3Q,EAAAuQ,EAAAC,cAAsC,IAChf3D,EAAA5W,MAAA8a,EAAA,GAAAlE,EAAA5W,KAAoB,IAAAtB,OAAA,EAAkE,IAAAI,KAArD6X,EAAAxK,MAAAwK,EAAAxK,KAAA+O,eAAAxc,EAAAiY,EAAAxK,KAAA+O,cAAqDtE,EAAA4D,EAAA5b,KAAAgY,EAAA9X,KAAA2b,EAAAna,eAAAxB,KAAAC,EAAAD,QAAA,IAAA8X,EAAA9X,SAAA,IAAAJ,IAAAI,GAAA8X,EAAA9X,IAA8G,QAArBA,EAAAiV,UAAA/H,OAAA,GAAqBjN,EAAAic,SAAAnE,OAAsB,KAAA/X,EAAA,CAAaJ,EAAAuc,MAAAnc,GAAW,QAAAD,EAAA,EAAYA,EAAAC,EAAID,IAAAH,EAAAG,GAAAkV,UAAAlV,EAAA,GAAwBE,EAAAic,SAAAtc,EAAa,OAAOyc,SAAAxb,EAAAwM,KAAAwK,EAAAxK,KAAAnM,IAAA8a,EAAAJ,IAAAK,EAAArB,MAAA3a,EAAAqc,OAAArR,IAAqDoU,cAAA,SAAAxH,GAA2B,IAAAC,EAAAiE,EAAA5a,KAAA,KAAA0W,GAA8B,OAATC,EAAAzK,KAAAwK,EAASC,GAASwH,eAAA/C,EAAA7N,QAAA,SAAA6Q,oDAAuFC,kBAAAhE,EAC5flD,OAAAoB,IAAU+F,GAAIC,QAAA7B,GAAU8B,EAAAF,GAAA5B,GAAA4B,EAAW/f,EAAAD,QAAAkgB,EAAAD,QAAAC,EAAAD,QAAAC,gCClBnCjgB,EAAAD,QAAAF,EAAA,0ZCHA,IAAAqgB,EAAArgB,EAAA,IAIA2R,EAAA3R,EAAA,GAEAmT,EAAAnT,EAAA,IAEA4K,EAAA5K,EAAA,GAWAsgB,EAAA,SAAAnV,GAAA,SAAAmV,mDA8BA,OA9BqClV,EAAAkV,EAAAnV,GAGnCmV,EAAAte,UAAAue,kBAAA,eACMrO,EADNC,EAAA7G,KAGI4G,EADC5G,KAAK+P,MAAMmF,cACNlV,KAAK+P,MAAMmF,cAActO,IAEzB,IAAIP,GACRwF,WAAY,IAAIvM,GACd6D,GAAInD,KAAK+P,MAAMjS,WAKrB,IAAI+J,GACFjB,IAAKA,EACLuO,UAAWnV,KAAKoV,eACfpN,KAAK,SAAAJ,GACHf,EAAKkJ,MAAMsF,aACZxO,EAAKkJ,MAAMsF,YAAYzN,MAK7BoN,EAAAte,UAAAud,OAAA,eAAApN,EAAA7G,KACE,OAAO+U,EAAAT,cAAA,OAAKgB,UAAU,aAAaC,MAAOvV,KAAK+P,MAAMwF,OACrDR,EAAAT,cAAA,OAAKvD,IAAK,SAACyE,GAAU3O,EAAKuO,aAAeI,OAG7CR,EA9BA,CAAqCD,EAAM1B,0GCV3C,IAAAlN,EAAAzR,EAAA,GACA+gB,EAAA/gB,EAAA,IA8BQE,EAAAogB,QA9BDS,EAAAZ,QACP,IAAAa,EAAAhhB,EAAA,GACA8K,EAAA9K,EAAA,GACAihB,EAAAjhB,EAAA,GAKMkhB,EAJNlhB,EAAA,GAIuBmhB,eAAeC,cAChCC,EAAUH,EAAeI,aAC/B,GAAID,EAGFvW,EAAgByW,cAAcF,EAAQG,qBAItC,IAAMC,EAAU3W,EAAgB4W,GAAG,oBAAqB,SAACC,OAAEC,EAAAD,EAAAC,WACrDX,EAAAhb,gBAAgB2b,EAAWve,OAAQ6d,EAAeW,kBACpDX,EAAeY,mBAAmBF,GAClCH,EAAQtM,YAKd1D,EAAAsQ,iBAAiBX,cAAcY,mBAC7BC,OAAQxQ,EAAAyQ,gBAAgBC,kBACxBC,UAAW,IAAIpB,EAAAvK,yFAIjB4L,CAAAriB,EAAA","file":"jimu-arcgis/index.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 23);\n","export function getServerByUrl(_url){\n  _url = (_url || '').trim();\n  _url = _url.replace(/^(http(s?):?)\\/\\//gi, '');\n\n  if(_url.indexOf('//') === 0){\n    _url = _url.slice(2);\n  }\n\n  return _url.split('/')[0];\n};\n\nexport function getServerWithProtocol(_url){\n  var result = '';\n  _url = (_url || '').trim();\n\n  if(_url){\n    var server = getServerByUrl(_url);\n\n    if(!server){\n      return result;\n    }\n\n    var protocol = getProtocol(_url);\n\n    if(protocol){\n      result = protocol + \"://\" + server;\n    }\n    else if(_url.indexOf('//') === 0){\n      result = \"//\" + server;\n    }\n  }\n\n  return result;\n};\n\nexport function isSameServer(_url1, _url2){\n  _url1 = getServerByUrl(_url1) || \"\";\n  _url2 = getServerByUrl(_url2) || \"\";\n  return _url1.toLowerCase() === _url2.toLowerCase();\n};\n\nexport function getDomain(url) {\n  var serverName, matched, result = '';\n\n  serverName = getServerByUrl(url);\n  if (serverName) {\n    serverName = serverName.replace(/:\\d+$/, '');\n    matched = serverName.match(/[^.]\\w+\\.\\w+$/);\n    if (matched !== null) {\n      result = matched[0];\n      // if the url is an IP address, it isn't a vadli domain\n      if (/^\\d+\\.\\d+$/.test(result)) {\n        result = '';\n      }\n    }\n  }\n  return result;\n};\n\nexport function isSameDomain(url1, url2) {\n  var domain1 = getDomain(url1),\n    domain2 = getDomain(url2);\n\n  return domain1 !== '' && domain1 === domain2;\n};\n\nexport function isOrgOnline(_url){\n  var server = getServerByUrl(_url).toLowerCase();\n  return server.indexOf('.maps.arcgis.com') >= 0;\n};\n\nexport function isOnline(_url){\n  var server = getServerByUrl(_url).toLowerCase();\n  return server.indexOf('.arcgis.com') >= 0;\n};\n\nexport function isArcGIScom(_url){\n  var server = getServerByUrl(_url).toLowerCase();\n  return server === 'www.arcgis.com' || server === 'arcgis.com';\n};\n\nexport function getStandardPortalUrl(_portalUrl){\n  var server = getServerByUrl(_portalUrl);\n  if (server === '') {\n    return '';\n  }\n  if (isOnline(server)) {\n    if(isArcGIScom(server)){\n      server = 'www.arcgis.com';\n    }\n    _portalUrl = addProtocol(_portalUrl);\n    var protocol = getProtocol(_portalUrl);\n    _portalUrl = protocol + '://' + server;\n  } else {\n    _portalUrl = (_portalUrl || '').trim().replace(/sharing(.*)/gi, '').replace(/\\/*$/g, '');\n    _portalUrl = addProtocol(_portalUrl);\n    var pattStr = 'http(s?):\\/\\/' + server;\n    var pattern = new RegExp(pattStr, 'g');\n    var nail = _portalUrl.replace(pattern, '');\n    if (!nail) {\n      _portalUrl = _portalUrl + '/arcgis';\n    }\n  }\n\n  return _portalUrl;\n};\n\nexport function isSamePortalUrl(_portalUrl1, _portalUrl2){\n  //test: http://www.arcgis.com/sharing/rest === https://www.arcgis.com\n  //test: http://www.arcgis.com/ === https://www.arcgis.com\n  //test: //www.arcgis.com/sharing/rest === https://www.arcgis.com/\n  var patt1 = /^http(s?):\\/\\//gi;\n  var patt2 = /^\\/\\//gi;\n  _portalUrl1 = getStandardPortalUrl(_portalUrl1)\n  .toLowerCase().replace(patt1, '').replace(patt2, '');\n  _portalUrl2 = getStandardPortalUrl(_portalUrl2)\n  .toLowerCase().replace(patt1, '').replace(patt2, '');\n  return _portalUrl1 === _portalUrl2;\n};\n\nexport function addProtocol(url){\n  var noProtocol = url.toLowerCase().indexOf('http://') <= -1 &&\n    url.toLowerCase().indexOf('https://') <= -1;\n\n  if(noProtocol){\n    var defaultProtocol = '';\n    if(typeof window !== 'undefined' && window.location) {\n      //for client side\n      defaultProtocol = window.location.protocol;\n      if (url.startWith('//')) {\n        url = defaultProtocol + url; //http: + //js.arcgis.com\n      } else if (url.startWith('/')) {\n        // http: + // + localhost + /proxy.js\n        url = defaultProtocol + \"//\" + window.location.host + url;\n      } else {\n        url = defaultProtocol + \"//\" + url; //http: + // + www.arcgis.com\n      }\n    }\n    else{\n      //for server side\n      defaultProtocol = 'http:';\n      if (url.startWith('//')) {\n        url = defaultProtocol + url; //http: + //js.arcgis.com\n      } else {\n        url = defaultProtocol + \"//\" + url;\n      }\n    }\n\n  }\n  return url;\n};\n\nexport function getProtocol(url){\n  //test: http://www.arcgis.com => http\n  //test: https://www.arcgis.com => https\n  //test: //www.arcgis.com => ''\n  var protocol = '';\n  url = url.toLowerCase();\n  if(url.indexOf('https://') === 0){\n    protocol = 'https';\n  }\n  else if(url.indexOf('http://') === 0){\n    protocol = 'http';\n  }\n  return protocol;\n};\n\nexport function updateUrlProtocolByOtherUrl(url, otherUrl){\n  otherUrl = otherUrl.toLowerCase();\n  if(otherUrl.indexOf('https://') === 0){\n    url = setHttpsProtocol(url);\n  }else if(otherUrl.indexOf('http://') === 0){\n    url = setHttpProtocol(url);\n  }\n  return url;\n};\n\nexport function removeProtocol(_url){\n  //test: http://www.arcgis.com => //www.arcgis.com\n  //test: https://www.arcgis.com => //www.arcgis.com\n  return _url.replace(/^http(s?):\\/\\//i, '//');\n};\n\nexport function setHttpProtocol(_url){\n  _url = addProtocol(_url);\n  var reg = /^https:\\/\\//;\n  var url = _url.replace(reg, 'http://');\n  return url;\n};\n\nexport function setHttpsProtocol(_url){\n  _url = addProtocol(_url);\n  var reg = /^http:\\/\\//;\n  var url = _url.replace(reg, 'https://');\n  return url;\n};\n\nexport function setProtocol(_url, protocol){\n  if(protocol.indexOf('https') >= 0){\n    return setHttpsProtocol(_url);\n  }else if(protocol.indexOf('http') >= 0){\n    return setHttpProtocol(_url);\n  } else {\n    return _url;\n  }\n};\n\nexport function getSharingUrl(_portalUrl){\n  var sharingUrl = '';\n  var portalUrl = getStandardPortalUrl(_portalUrl);\n  if(portalUrl){\n    sharingUrl = portalUrl + '/sharing/rest';\n  }\n  return sharingUrl;\n};\n\nexport function getOAuth2Url(_portalUrl){\n  var oauth2Url = '';\n  var portalUrl = getStandardPortalUrl(_portalUrl);\n  if(portalUrl){\n    oauth2Url = portalUrl + '/sharing/rest/oauth2';\n  }\n  return oauth2Url;\n};\n\nexport function getAppIdUrl(_portalUrl, _appId){\n  var appIdUrl = '';\n  var portalUrl = getStandardPortalUrl(_portalUrl);\n  if(portalUrl){\n    appIdUrl = portalUrl + '/sharing/rest/oauth2/apps/' + _appId;\n  }\n  return appIdUrl;\n};\n\nexport function getSignInUrl(_portalUrl){\n  var signInUrl = \"\";\n  var portalUrl = getStandardPortalUrl(_portalUrl);\n  if(portalUrl){\n    signInUrl = portalUrl + \"/home/signin.html\";\n  }\n  return signInUrl;\n};\n\nexport function getBaseSearchUrl(_portalUrl){\n  var searchUrl = '';\n  var portalUrl = getStandardPortalUrl(_portalUrl);\n  portalUrl = portalUrl.replace(/\\/*$/g, '');\n  if(portalUrl){\n    searchUrl = portalUrl + '/sharing/rest/search';\n  }\n  return searchUrl;\n};\n\nexport function getBaseItemUrl(_portalUrl){\n  var baseItemUrl = '';\n  var portalUrl = getStandardPortalUrl(_portalUrl);\n  if(portalUrl){\n    baseItemUrl = portalUrl + '/sharing/rest/content/items';\n  }\n  return baseItemUrl;\n};\n\nexport function getItemUrl(_portalUrl, _itemId){\n  var itemUrl = '';\n  var baseItemUrl = getBaseItemUrl(_portalUrl);\n  if(baseItemUrl && _itemId){\n    itemUrl = baseItemUrl + '/' + _itemId;\n  }\n  return itemUrl;\n};\n\nexport function getItemDataUrl(_portalUrl, _itemId){\n  var itemDataUrl = '';\n  var itemUrl = getItemUrl(_portalUrl, _itemId);\n  if(itemUrl){\n    itemDataUrl = itemUrl + '/data';\n  }\n  return itemDataUrl;\n};\n\nexport function getItemGroupsUrl(_portalUrl, _itemId){\n  var itemDataUrl = '';\n  var itemUrl = getItemUrl(_portalUrl, _itemId);\n  if(itemUrl){\n    itemDataUrl = itemUrl + '/groups';\n  }\n  return itemDataUrl;\n};\n\nexport function getGenerateTokenUrl(_portalUrl){\n  var tokenUrl = '';\n  _portalUrl = getStandardPortalUrl(_portalUrl);\n  if(_portalUrl){\n    // tokenUrl = _portalUrl + '/sharing/rest/generateToken';\n    // The url should not include 'rest' because portal 10.3 doesn't support GET method with 'rest' and\n    // get following error\n    // {\"error\":{\"code\":405,\"messageCode\":\"GWM_0005\",\"message\":\"Method not supported.\",\"details\":[]}}\n    tokenUrl = _portalUrl + '/sharing/generateToken';\n  }\n  return tokenUrl;\n};\n\nexport function getItemDetailsPageUrl(_portalUrl, _itemId){\n  var url = '';\n  if(_portalUrl && _itemId){\n    _portalUrl = getStandardPortalUrl(_portalUrl);\n    url = _portalUrl + \"/home/item.html?id=\" + _itemId;\n  }\n  return url;\n};\n\nexport function getUserProfilePageUrl(_portalUrl, _user){\n  var url = '';\n  if(_portalUrl && _user){\n    _portalUrl = getStandardPortalUrl(_portalUrl);\n    url = _portalUrl + '/home/user.html?user=' + _user;\n  }\n  return url;\n};\n\nexport function getBaseGroupUrl(_portalUrl){\n  var url = '';\n  var thePortalUrl = getStandardPortalUrl(_portalUrl);\n  if(thePortalUrl){\n    url = thePortalUrl + '/sharing/rest/community/groups';\n  }\n  return url;\n};\n\nexport function getPortalSelfInfoUrl(_portalUrl){\n  var url = '';\n  var thePortalUrl = _portalUrl || '';\n  thePortalUrl = getStandardPortalUrl(thePortalUrl);\n  if(thePortalUrl){\n    url = thePortalUrl + '/sharing/rest/portals/self';\n  }\n  return url;\n};\n\nexport function getCommunitySelfUrl(_portalUrl){\n  var url = '';\n  var thePortalUrl = _portalUrl || '';\n  thePortalUrl = getStandardPortalUrl(thePortalUrl);\n  if(thePortalUrl){\n    url = thePortalUrl + '/sharing/rest/community/self';\n  }\n  return url;\n};\n\nexport function getBaseUserUrl(_portalUrl){\n  var baseUserUrl = '';\n  var portalUrl = getStandardPortalUrl(_portalUrl);\n  if(portalUrl){\n    baseUserUrl = portalUrl + '/sharing/rest/community/users';\n  }\n  return baseUserUrl;\n};\n\nexport function getUserUrl(_portalUrl, _userId){\n  var userUrl = '';\n  var baseUserUrl = getBaseUserUrl(_portalUrl);\n  if(_portalUrl && _userId){\n    userUrl = baseUserUrl + '/' + _userId;\n  }\n  return userUrl;\n};\n\nexport function getUserTagsUrl(_portalUrl, _userId){\n  var userTagsUrl = '';\n  var userUrl = getUserUrl(_portalUrl, _userId);\n  if(_portalUrl && _userId){\n    userTagsUrl = userUrl + '/tags';\n  }\n  return userTagsUrl;\n};\n\nexport function getUserThumbnailUrl(portalUrl, userId, thumbnail){\n  var thumbnailUrl = \"\";\n  var userUrl = getUserUrl(portalUrl, userId);\n  if(userUrl && thumbnail){\n    thumbnailUrl = userUrl + '/info/' + thumbnail;\n  }\n  return thumbnailUrl;\n};\n\nexport function getContentUrl(_portalUrl){\n  var contentUrl = '';\n  if(_portalUrl) {\n    _portalUrl = getStandardPortalUrl(_portalUrl);\n    contentUrl = _portalUrl + '/sharing/rest/content';\n  }\n  return contentUrl;\n};\n\nexport function getUserContentUrl(_portalUrl, _user, _folderId?){\n  var contentUrl = '', userContentUrl = '';\n  if(_portalUrl && _user) {\n    contentUrl = getContentUrl(_portalUrl);\n    if(_folderId) {\n      userContentUrl = contentUrl + '/users/' + _user + '/' + _folderId;\n    } else {\n      userContentUrl = contentUrl + '/users/' + _user;\n    }\n  }\n  return userContentUrl;\n};\n\nexport function getUserContentItemUrl(_portalUrl, _user, _itemId){\n  var userContentUrl = '',userContentItemUrl = '';\n  if(_portalUrl && _user && _itemId) {\n    userContentUrl = getUserContentUrl(_portalUrl, _user);\n    userContentItemUrl = userContentUrl + '/items/' + _itemId;\n  }\n  return userContentItemUrl;\n};\n\nexport function getItemResourceUrl(_portalUrl, _itemId, _customResUrl){\n  var contentUrl = '',itemResourceUrl = '';\n  if(_portalUrl && _itemId) {\n    contentUrl = getContentUrl(_portalUrl);\n    if(_customResUrl){\n      itemResourceUrl = contentUrl + '/items/' + _itemId + '/resources/' + _customResUrl;\n    }else{\n      itemResourceUrl = contentUrl + '/items/' + _itemId + '/resources';\n    }\n  }\n  return itemResourceUrl;\n};\n\nexport function getAddItemUrl(_portalUrl, _user, _folderId){\n  var userContentUrl = '', addItemUrl = '';\n  if(_portalUrl && _user) {\n    userContentUrl = getUserContentUrl(_portalUrl, _user, _folderId);\n    addItemUrl = userContentUrl + '/addItem' ;\n  }\n  return addItemUrl;\n};\n\nexport function getDeleteItemUrl(_portalUrl, _user, _itemId){\n  var deleteItemUrl = '';\n  var userItemsUrl = getUserItemsUrl(_portalUrl, _user);\n  if(userItemsUrl){\n    deleteItemUrl = userItemsUrl + '/' + _itemId + '/delete';\n  }\n  return deleteItemUrl;\n};\n\n\nexport function getUserItemsUrl(_portalUrl, _user, _folderId?) {\n  var userContentUrl = '', userItemsUrl = '';\n  if(_portalUrl && _user) {\n    userContentUrl = getUserContentUrl(_portalUrl, _user, _folderId);\n    userItemsUrl = userContentUrl + '/items' ;\n  }\n  return userItemsUrl;\n};\n\nexport function getUpdateItemUrl(_portalUrl, _user, _itemId, _folderId) {\n  var userItemsUrl = '', updateItem = '';\n  if(_portalUrl && _user) {\n    userItemsUrl = getUserItemsUrl(_portalUrl, _user, _folderId);\n    updateItem = userItemsUrl + '/' + _itemId + \"/update\";\n  }\n  return updateItem;\n};\n\nexport function shareItemUrl(_portalUrl, _user, _itemId, _folderId) {\n  var userItemsUrl = '', shareItemUrl = '';\n  if(_portalUrl && _user) {\n    userItemsUrl = getUserItemsUrl(_portalUrl, _user, _folderId);\n    shareItemUrl = userItemsUrl + '/' + _itemId + \"/share\";\n  }\n  return shareItemUrl;\n};\n\nexport function getHomeIndexUrl(_portalUrl){\n  var url = '';\n  var thePortalUrl = getStandardPortalUrl(_portalUrl);\n  if(thePortalUrl){\n    url = thePortalUrl + '/home/index.html';\n  }\n  return url;\n};\n\nexport function getHomeMapViewerUrl(_portalUrl, /* optional */ itemId){\n  var url = '';\n  var thePortalUrl = getStandardPortalUrl(_portalUrl);\n  if(thePortalUrl){\n    url = thePortalUrl + '/home/webmap/viewer.html';\n    if(itemId){\n      url += \"?webmap=\" + itemId;\n    }\n    else{\n      url += \"?useExisting=1\";\n    }\n  }\n  return url;\n};\n\nexport function getHomeSceneViewerUrl(_portalUrl, /* optional */ itemId){\n  var url = '';\n  var thePortalUrl = getStandardPortalUrl(_portalUrl);\n  if(thePortalUrl){\n    url = thePortalUrl + '/home/webscene/viewer.html';\n    if(itemId){\n      url += \"?webscene=\" + itemId;\n    }\n  }\n  return url;\n};\n\nexport function getHomeGalleryUrl(_portalUrl){\n  var url = '';\n  var thePortalUrl = getStandardPortalUrl(_portalUrl);\n  if(thePortalUrl){\n    url = thePortalUrl + '/home/gallery.html';\n  }\n  return url;\n};\n\nexport function getHomeGroupsUrl(_portalUrl){\n  var url = '';\n  var thePortalUrl = getStandardPortalUrl(_portalUrl);\n  if(thePortalUrl){\n    url = thePortalUrl + '/home/groups.html';\n  }\n  return url;\n};\n\nexport function getHomeMyContentUrl(_portalUrl){\n  var url = '';\n  var thePortalUrl = getStandardPortalUrl(_portalUrl);\n  if(thePortalUrl){\n    url = thePortalUrl + '/home/content.html';\n  }\n  return url;\n};\n\nexport function getHomeMyOrganizationUrl(_portalUrl){\n  var url = '';\n  var thePortalUrl = getStandardPortalUrl(_portalUrl);\n  if(thePortalUrl){\n    url = thePortalUrl + '/home/organization.html';\n  }\n  return url;\n};\n\nexport function getHomeUserUrl(_portalUrl){\n  var url = '';\n  var thePortalUrl = getStandardPortalUrl(_portalUrl);\n  if(thePortalUrl){\n    url = thePortalUrl + '/home/user.html';\n  }\n  return url;\n};\n\n//locale is optional, default value is 'en'\nexport function getPortalHelpUrl(_portalUrl, locale){\n  var url = '';\n  var thePortalUrl = getStandardPortalUrl(_portalUrl);\n  if(thePortalUrl){\n    var l = locale || \"en\";\n    url = thePortalUrl + \"/portalhelp/\" + l + \"/website/help/\";\n  }\n  return url;\n};\n\nexport function getPortalAdminHelpUrl(_portalUrl, locale){\n  var url = '';\n  var thePortalUrl = getStandardPortalUrl(_portalUrl);\n  if(thePortalUrl){\n    var l = locale || \"en\";\n    url = thePortalUrl + '/portalhelp/' + l + \"/admin/help/\";\n  }\n  return url;\n};\n\nexport function getPortalProxyUrl(_portalUrl){\n  //examples:\n  //http://esridevbeijing.maps.arcgis.com/sharing/proxy\n  //http://gallery.chn.esri.com/arcgis/sharing/proxy\n  var url = '';\n  var thePortalUrl = getStandardPortalUrl(_portalUrl);\n  if(thePortalUrl){\n    url = thePortalUrl + '/sharing/proxy';\n  }\n  return url;\n};\n\nexport function getOAuth2SignOutUrl(_portalUrl){\n  var signOutUrl = \"\";\n  var portalUrl = getStandardPortalUrl(_portalUrl);\n  if(portalUrl){\n    signOutUrl = portalUrl + '/sharing/rest/oauth2/signout';//?redirect_uri=http://...\n  }\n  return signOutUrl;\n};\n\nexport function getNewPrintUrl(_portalUrl){\n  var url = '';\n  var thePortalUrl = getStandardPortalUrl(_portalUrl);\n  if(thePortalUrl){\n    thePortalUrl = setHttpProtocol(thePortalUrl);\n    url = thePortalUrl + '/sharing/tools/newPrint';\n  }\n  return url;\n};\n\nexport function getSwitchAccoutnsUrl(_portalUrl, client_id, /*optional*/ redirect_uri){\n  var url = '';\n  var portalUrl = getStandardPortalUrl(_portalUrl);\n  if(portalUrl){\n    url = portalUrl + \"/home/pages/Account/manage_accounts.html#client_id=\" + client_id;\n    if(redirect_uri){\n      url += \"&redirect_uri=\" + redirect_uri;\n    }\n  }\n  if(url){\n    url = setHttpsProtocol(url);\n  }\n  return url;\n};\n\n","module.exports = __WEBPACK_EXTERNAL_MODULE__1__;","module.exports = __WEBPACK_EXTERNAL_MODULE__2__;","module.exports = __WEBPACK_EXTERNAL_MODULE__3__;","module.exports = __WEBPACK_EXTERNAL_MODULE__4__;","module.exports = __WEBPACK_EXTERNAL_MODULE__5__;","module.exports = __WEBPACK_EXTERNAL_MODULE__6__;","import Portal = require('esri/portal/Portal');\nimport PortalItem = require('esri/portal/PortalItem');\nimport PortalQueryParams = require('esri/portal/PortalQueryParams');\nimport esriConfig = require('esri/config');\nimport IdentityManager = require('esri/identity/IdentityManager');\nimport esriRequest = require('esri/request');\n\nimport * as portalUrlUtils from '../../utils/portal-url-utils';\n\nvar portals: {[portalUrl: string]: JimuPortal} = {};\n\nexport class JimuPortal extends Portal{\n  getItem(itemId: string): Promise<PortalItem>{\n    var itemUrl = portalUrlUtils.getItemUrl(this.url, itemId);\n    var requestOptions: __esri.requestEsriRequestOptions = {\n      responseType: 'json',\n      query: {\n        f: 'json'\n      },\n      callbackParamName: 'callback'\n    };\n\n    if(this.getToken()){\n      requestOptions.query.token = this.getToken();\n    }\n\n    return esriRequest(itemUrl, requestOptions).then(res => {\n      var portalItem = new PortalItem(res.data);\n      return portalItem;\n    });\n  }\n\n  getItemData(itemId: string): Promise<any>{\n    var itemDataUrl = portalUrlUtils.getItemDataUrl(this.url, itemId);\n    var requestOptions: __esri.requestEsriRequestOptions = {\n      responseType: 'json',\n      query: {\n        f: 'json'\n      },\n      callbackParamName: 'callback'\n    };\n\n    if(this.getToken()){\n      requestOptions.query.token = this.getToken();\n    }\n\n    return esriRequest(itemDataUrl, requestOptions).then(res => {\n      return res.data;\n    });\n  }\n\n\n\n  /**\n   * get the signed in user's token.\n   * if there is user has signed in, return null\n   */\n  getToken(): string{\n    if(!this.user){\n      return null;\n    }\n\n    let cred = IdentityManager.findCredential(this.url, this.user.username);\n    if(!cred){\n      return null;\n    }\n\n    return cred.token;\n  }\n}\n\nexport function getPortal(portalUrl: string = esriConfig.portalUrl): JimuPortal{\n  return portals[portalUrl];\n}\n\nexport function createPortal(portalUrl: string = esriConfig.portalUrl): Promise<JimuPortal>{\n  if(portals[portalUrl]){\n    if(portals[portalUrl].loaded){\n      return Promise.resolve(portals[portalUrl]);\n    }else{\n      return portals[portalUrl].load().then(portal => portal) as Promise<JimuPortal>;\n    }\n  }else{\n    let portal = new JimuPortal({url: portalUrl});\n    portals[portalUrl] = portal;\n    return portals[portalUrl].load().then(portal => portal) as Promise<JimuPortal>;\n  }\n}\n\nexport function checkItemTitleExist(portalUrl: string, userName: string, itemTitle: string){\n  var q = 'owner:' + userName + ' title:' + itemTitle;\n  var params = {\n    query: q\n  };\n\n  return getPortal(portalUrl).queryItems(params as PortalQueryParams).then(function(queryResult) {\n    if(queryResult.total > 0) {\n      return true;\n    } else {\n      return false;\n    }\n  });\n}\n\nexport function getDefaultWebScene(_portalUrl: string): Promise<string>{\n  var portalUrl = portalUrlUtils.getStandardPortalUrl(_portalUrl);\n  return searchWABDefaultWebScene(portalUrl).then(function(webSceneId){\n    if(webSceneId){\n      return webSceneId;\n    }else{\n      return createWABDefaultWebScene(portalUrl).\n      then(function(webSceneId){\n        var portal = getPortal(portalUrl);\n        var canShareToPublic = false;\n        let user = portal.user;\n        // if(user && user.privileges && user.privileges.length > 0){\n        //   canShareToPublic = user.privileges.some(function(privilege){\n        //     return privilege.indexOf(\"shareToPublic\") >= 0;\n        //   });\n        // }\n        if(canShareToPublic){\n          //If user has \"shareToPublic\" privilege,\n          //we should share this newly created web scene to everyone.\n          var args = {\n            everyone: true\n          };\n          return webSceneId;\n          // return user.shareItem(args, webSceneId).then(function(){\n          //   return webSceneId;\n          // }, function(){\n          //   return webSceneId;\n          // });\n        }else{\n          return webSceneId;\n        }\n      });\n    }\n  });\n}\n\nfunction searchWABDefaultWebScene(_portalUrl): Promise<string>{\n  var portalUrl = portalUrlUtils.getStandardPortalUrl(_portalUrl);\n  var portal = getPortal(portalUrl);\n  var webSceneQueryStr = ' ' + getItemQueryStringByTypes(['Web Scene']) + ' ';\n  //must use double quotation marks around typeKeywords\n  //such as typekeywords:\"Web AppBuilder\" or typekeywords:\"Web AppBuilder,Web Map\"\n  var q = 'typekeywords:\"WABDefaultWebScene\" access:public ' + webSceneQueryStr;\n  var args = {\n    query: q\n  };\n  return portal.queryItems(args as PortalQueryParams).then(function(response){\n    if(response && response.results && response.results.length > 0){\n      return response.results[0].id;\n    }else{\n      return null;\n    }\n  });\n}\n\nfunction createWABDefaultWebScene(portalUrl){\n  portalUrl = portalUrlUtils.getStandardPortalUrl(portalUrl);\n  var portal = this.getPortal(portalUrl);\n  return portal.getUser().then(function(user){\n    var url1 = \"http://services.arcgisonline.com/ArcGIS/rest/services/\" +\n               \"World_Imagery/MapServer\";\n    var url2 = \"http://elevation3d.arcgis.com/arcgis/rest/services/\" +\n               \"WorldElevation3D/Terrain3D/ImageServer\";\n    var data = {\n      \"operationalLayers\": [],\n      \"baseMap\": {\n        \"id\": \"151b431fe65-basemap-0\",\n        \"title\": \"Topographic\",\n        \"baseMapLayers\": [{\n          \"id\": \"defaultBasemap\",\n          \"url\": url1,\n          \"layerType\": \"ArcGISTiledMapServiceLayer\"\n        }],\n        \"elevationLayers\": [{\n          \"id\": \"globalElevation\",\n          \"url\": url2,\n          \"layerType\": \"ArcGISTiledElevationServiceLayer\"\n        }]\n      },\n      \"version\": \"1.3\",\n      \"authoringApp\": \"WebSceneViewer\",\n      \"authoringAppVersion\": \"3.10.0.0\",\n      \"spatialReference\": {\n        \"wkid\": 102100,\n        \"latestWkid\": 3857\n      },\n      \"viewingMode\": \"global\",\n      \"initialState\": {\n        \"viewpoint\": {\n          \"scale\": 45188197.847224146,\n          \"rotation\": 0,\n          \"targetGeometry\": {\n            \"x\": 144770.99872895706,\n            \"y\": 3232837.215000455,\n            \"spatialReference\": {\n              \"wkid\": 102100,\n              \"latestWkid\": 3857\n            },\n            \"z\": -127.7412482528016\n          },\n          \"camera\": {\n            \"position\": {\n              \"x\": 144770.99767624016,\n              \"y\": 3182557.105058348,\n              \"spatialReference\": {\n                \"wkid\": 102100,\n                \"latestWkid\": 3857\n              },\n              \"z\": 25512548.00000001\n            },\n            \"heading\": 0,\n            \"tilt\": 0.0999986601088944\n          }\n        },\n        \"environment\": {\n          \"lighting\": {\n            \"datetime\": 1426420488000,\n            \"displayUTCOffset\": 0\n          }\n        }\n      },\n      \"presentation\": {\n        \"slides\": []\n      }\n    };\n    var text = JSON.stringify(data);\n    var args = {\n      title: \"Default Web Scene\",\n      type: \"Web Scene\",\n      typeKeywords: \"WABDefaultWebScene\",\n      tags: \"default\",\n      text: text,\n      snippet: \"\"\n    };\n    return user.addItem(args, \"\").then(function(response){\n      if (response.success) {\n        return response.id;\n      }else{\n        console.error(\"Can't create default web scene:\", response);\n        return Promise.reject(response);\n      }\n    });\n  });\n}\n\nfunction getAllItemTypes() {\n  var allTypes = [];\n  //Web Content\n  var maps1 = ['Web Map', 'Web Scene', 'CityEngine Web Scene'];\n  var layers1 = ['Feature Service', 'Map Service', 'Image Service', 'KML', 'WMS',\n  'Feature Collection', 'Feature Collection Template', 'Geodata Service', 'Globe Service'];\n  var tools1 = ['Geometry Service', 'Geocoding Service', 'Network Analysis Service',\n  'Geoprocessing Service'];\n  var applications1 = ['Web Mapping Application', 'Mobile Application', 'Code Attachment',\n  'Operations Dashboard Add In', 'Operation View'];\n  var datafiles1 = ['Symbol Set', 'Color Set', 'Shapefile', 'CSV', 'Service Definition',\n  'Document Link', 'Microsoft Word', 'Microsoft PowerPoint', 'Microsoft Excel', 'PDF',\n  'Image', 'Visio Document'];\n  //Desktop Content\n  var maps2 = ['Map Document', 'Map Package', 'Tile Package', 'ArcPad Package',\n  'Explorer Map', 'Globe Document', 'Scene Document', 'Published Map', 'Map Template',\n  'Windows Mobile Package'];\n  var layers2 = ['Layer', 'Layer Package', 'Explorer Layer'];\n  var tools2 = ['Geoprocessing Package', 'Geoprocessing Sample', 'Locator Package',\n  'Rule Package'];\n  var applications2 = ['Workflow Manager Package', 'Desktop Application',\n  'Desktop Application Template', 'Code Sample', 'Desktop Add In', 'Explorer Add In'];\n\n  allTypes = allTypes.concat(maps1).concat(layers1).concat(tools1)\n  .concat(applications1).concat(datafiles1);\n  allTypes = allTypes.concat(maps2).concat(layers2).concat(tools2).concat(applications2);\n  return allTypes;\n}\n\nfunction getItemQueryStringByTypes(itemTypes) {\n  var queryStr = '';\n  var allTypes = getAllItemTypes();\n  if (itemTypes && itemTypes.length > 0) {\n    if (itemTypes.length > 0) {\n      var validStr = '';\n      itemTypes.forEach(function(type, index) {\n        var s = ' type:\"' + type + '\" ';\n        validStr += s;\n        if (index !== itemTypes.length - 1) {\n          validStr += ' OR ';\n        }\n      });\n      queryStr = ' ( ' + validStr + ' ) ';\n      var sumAllTypes = itemTypes.concat(allTypes);\n      var removedTypes = sumAllTypes.filter(function(removedType){\n        return itemTypes.every(function(itemType){\n          return itemType.toLowerCase().indexOf(removedType.toLowerCase()) < 0;\n        });\n      });\n\n      removedTypes.forEach(function(type) {\n        var s = ' -type:\"' + type + '\" ';\n        queryStr += s;\n      });\n    }\n  }\n  return queryStr;\n};","import {DataSource, DataRecord, RemoteQueryDataSource, ClientDataSource, AbstractDataSource, utils,\n  extensionSpec, IMDataSourceJson, DataSourceManager\n} from 'jimu-core';\n\nimport Map = require('esri/Map');\nimport WebMap = require('esri/WebMap');\nimport WebScene = require('esri/WebScene');\nimport MapView = require('esri/views/MapView');\nimport SceneView = require('esri/views/SceneView');\nimport Graphic = require('esri/Graphic');\nimport FeatureSet = require('esri/tasks/support/FeatureSet');\nimport Query = require('esri/tasks/support/Query');\nimport Layer = require('esri/layers/Layer');\nimport FeatureLayer = require('esri/layers/FeatureLayer');\nimport FeatureLayerView = require('esri/views/layers/FeatureLayerView');\nimport PortalItem = require('esri/portal/PortalItem');\nimport { DataSourceStatus } from 'jimu-core';\nimport {JimuPortal} from './services/portal/portal-service';\n\nexport enum DataSourceTypes{\n  Map = 'MAP',\n  WebMap = 'WEB_MAP',\n  WebScene = 'WEB_SCENE',\n  \n  MapView = 'WEB_MAP_VIEW',\n  SceneView = 'WEB_SCENE_VIEW',\n\n  FeatureLayer = 'FEATURE_LAYER',\n  FeatureLayerView = 'FEATURE_LAYER_VIEW'\n}\n\nexport class MapDataSource extends AbstractDataSource{\n  type: string = DataSourceTypes.Map;\n  map: Map;\n  isDataSourceSet = true;\n\n  constructor(dsConfig: IMDataSourceJson, map: Map){\n    super();\n    this.map = map;\n  }\n\n  init(){\n\n  }\n\n  getDataSources(): DataSource[]{\n    //TODO other layers\n    return this.map.layers.toArray().map(layer => {\n      let dsConfig: IMDataSourceJson = {\n        id: layer.id\n      } as IMDataSourceJson;\n      return new FeatureLayerDataSource(dsConfig, layer as FeatureLayer);\n    });\n  }\n\n  getDataSchema(){}\n}\n\nexport class WebMapDataSource extends AbstractDataSource{\n  type: string = DataSourceTypes.WebMap;\n  webMap: WebMap;\n  isDataSourceSet = true;\n\n  constructor(dsConfig: IMDataSourceJson, webMap: WebMap){\n    super();\n    this.webMap = webMap;\n  }\n\n  init(){\n\n  }\n\n  getDataSources(): DataSource[]{\n    //TODO other layers\n    // return this.map.layers.toArray().map(layer => {\n    //   let dsConfig: IMDataSourceJson = {\n    //     id: layer.id\n    //   } as IMDataSourceJson;\n    //   return new FeatureLayerDataSource(dsConfig, layer as FeatureLayer);\n    // });\n\n    return [];\n  }\n\n  getDataSchema(){}\n}\n\nexport class WebSceneDataSource extends AbstractDataSource{\n  type: string = DataSourceTypes.WebScene;\n  webScene: WebScene;\n  isDataSourceSet = true;\n\n  constructor(dsConfig: IMDataSourceJson, webScene: WebScene){\n    super();\n    this.webScene = webScene;\n  }\n\n  init(){}\n\n  getDataSources(): DataSource[]{\n    // TODO\n    return [];\n  }\n\n  getDataSchema(){}\n}\n\nexport class ViewDataSource extends AbstractDataSource{\n  type: string = DataSourceTypes.MapView;\n  mapView: MapView | SceneView;\n  isDataSourceSet = true;\n  currentLayerView: FeatureLayerViewDataSource;\n\n  _highlightHandler: any;\n\n  layerViewDatasources: {\n    [id: string]: FeatureLayerViewDataSource\n  } = {};\n\n  constructor(dsConfig: IMDataSourceJson, mapView: MapView){\n    super();\n    this.setView(mapView);\n    this.id = dsConfig.id;\n  }\n\n  init(){}\n\n  getDataSources(): DataSource[]{\n    // TODO\n    return [];\n  }\n\n  setView(mapView: MapView | SceneView) {\n    if(mapView) {\n      this.mapView = mapView;\n      mapView.when(()=> {\n        this.updateStatus(DataSourceStatus.Loaded);\n      });\n    }\n  }\n\n  getLayerViewDatasourceOnDemand(layerId:string):DataSource {\n    if(!this.mapView || this.mapView.allLayerViews.length === 0) return null;\n\n    if(this.layerViewDatasources[layerId]) {\n      return this.layerViewDatasources[layerId];\n    }\n    // NOTE: we are only doing FeatureLayer for now\n    let layerView = this.mapView.allLayerViews.find(view => {\n      return view.layer.id === layerId;\n    })\n    if(!layerView) return null;\n\n    let dsConfig: IMDataSourceJson = {\n      id: layerView.layer.id\n    } as IMDataSourceJson;\n    let flayerViewDs = new FeatureLayerViewDataSource(dsConfig, layerView as FeatureLayerView);\n    // flayerViewDs.featureLayerDatasource.dataSourceManager =\n    // flayerViewDs.dataSourceManager = this.dataSourceManager;\n    this.layerViewDatasources[layerId] = flayerViewDs;\n    return flayerViewDs;\n  }\n\n  selectRecord(index:number, layerId: string) {\n    if(index === this.currentIndexes[0]) return;\n    let layerViewDs: FeatureLayerViewDataSource = this.getLayerViewDatasourceOnDemand(layerId) as FeatureLayerViewDataSource;\n    this.currentLayerView = layerViewDs;\n    this.currentIndexes = [index];\n    this.dataSourceManager.onDataSourceCurrentIndexesChanged(this.id, [index]);\n  }\n\n  highlightRecord(objectId: number, layerId: string) {\n    let layerViewDs: FeatureLayerViewDataSource = this.getLayerViewDatasourceOnDemand(layerId) as FeatureLayerViewDataSource;\n    let records = layerViewDs.featureLayerDatasource.getRecords();\n    if(!layerViewDs || !records) return;\n    let index = records.findIndex(r => {\n      return r.feature.attributes[layerViewDs.featureLayerDatasource.featureLayer.objectIdField] === objectId;\n    });\n    this.selectRecord(index, layerId);\n    if(this._highlightHandler) this._highlightHandler.remove();\n    this._highlightHandler = layerViewDs.featureLayerView.highlight(objectId); \n  }\n\n  getCurrentRecord(): DataRecord{\n    if(this.currentIndexes === undefined || this.currentIndexes[0] === undefined || !this.currentLayerView) return null;\n    return this.currentLayerView.getRecords()[this.currentIndexes[0]];\n  }\n\n  getDataSchema(){}\n}\n\nexport class MapViewDataSource extends ViewDataSource{\n  type: string = DataSourceTypes.MapView;\n}\n\nexport class SceneViewDataSource extends ViewDataSource{\n  type: string = DataSourceTypes.SceneView;\n}\n\nexport class FeatureDataRecord implements DataRecord{\n  feature: Graphic;\n  private attributes: any;\n\n  constructor(graphic: Graphic){\n    this.feature = graphic;\n  }\n\n  getData(){\n    return this.feature.attributes;\n  }\n}\n\nexport class FeatureSetDataSource extends AbstractDataSource{\n  featureSet: FeatureSet;\n\n  constructor(dsConfig: IMDataSourceJson, featureSet: FeatureSet){\n    super();\n    this.featureSet = featureSet;\n    this.records = this.featureSet.features.map(f => new FeatureDataRecord(f));\n  }\n\n  init(){\n    \n  }\n\n  getDataSchema(){}\n}\n\nexport class FeatureLayerDataSource extends AbstractDataSource implements RemoteQueryDataSource{\n  featureLayer: FeatureLayer;\n  url: string;\n\n  constructor(dsConfig: IMDataSourceJson, featureLayer: FeatureLayer){\n    super();\n    this.featureLayer = featureLayer;\n    this.url = featureLayer.url;\n    this.type = DataSourceTypes.FeatureLayer;\n    this.id = dsConfig.id;\n  }\n\n  init(){\n    this.updateStatus(DataSourceStatus.Unloaded);\n  }\n\n  query(query): Promise<FeatureDataRecord[]>{\n    if(!this.status || this.status === DataSourceStatus.Unloaded){\n      this.updateStatus(DataSourceStatus.UnloadedLoading);\n    }else{\n      this.updateStatus(DataSourceStatus.LoadedLoading);\n    }\n    return this.featureLayer.queryFeatures(query).then(featureSet => {\n      let records = featureSet.features.map(f => new FeatureDataRecord(f));\n      this.records = records;\n      this.updateStatus(DataSourceStatus.Loaded);\n      return records;\n    });\n  }\n\n  selectRecord(index: number): void {\n    this.currentIndexes = [index];\n    this.dataSourceManager.onDataSourceCurrentIndexesChanged(this.id, [index]);\n  }\n\n  getDataSchema(){}\n\n}\n\nexport class FeatureLayerViewDataSource extends AbstractDataSource{\n  featureLayerView: FeatureLayerView;\n  featureLayerDatasource: FeatureLayerDataSource;\n\n  constructor(dsConfig: IMDataSourceJson, featureLayerView: FeatureLayerView){\n    super();\n\n    this.featureLayerView = featureLayerView;\n    this.type = DataSourceTypes.FeatureLayerView;\n    this.id = dsConfig.id;\n    this.featureLayerDatasource = new FeatureLayerDataSource({\n      id: featureLayerView.layer.id\n    } as IMDataSourceJson, featureLayerView.layer as FeatureLayer);\n  }\n\n  init(){\n  }\n\n  getRecords(): DataRecord[]{\n    return this.featureLayerDatasource.getRecords();\n  }\n\n  getCurrentRecord(): DataRecord{\n    return this.featureLayerDatasource.getCurrentRecord();\n  }\n\n  getDataSchema(){}\n\n}\n\nexport class DataSourceFactoryExtension implements extensionSpec.DataSourceFactory{\n  id: string = 'arcgis-data-source-factory';\n\n  getSupportDataSourceTypes(): string[]{\n    return [DataSourceTypes.Map, DataSourceTypes.WebMap, DataSourceTypes.FeatureLayer, \n      DataSourceTypes.WebScene, DataSourceTypes.MapView, DataSourceTypes.SceneView];\n  }\n\n  createDataSource(dsConfig: IMDataSourceJson): DataSource{\n    if(dsConfig.type === DataSourceTypes.Map){\n      return this.createMapDataSource(dsConfig);\n    }else if(dsConfig.type === DataSourceTypes.FeatureLayer){\n      return this.createFeatureLayerDataSource(dsConfig);\n    }else if(dsConfig.type === DataSourceTypes.WebMap){\n      return this.createWebMapDataSource(dsConfig);\n    }else if(dsConfig.type === DataSourceTypes.WebScene){\n      return this.createWebSceneDataSource(dsConfig);\n    }else if(dsConfig.type === DataSourceTypes.MapView){\n      return this.createMapViewDataSource(dsConfig);\n    }else if(dsConfig.type === DataSourceTypes.SceneView){\n      return this.createSceneViewDataSource(dsConfig);\n    }\n    else{\n      console.error('Unknow arcgis data source type.', dsConfig.type);\n    }\n  }\n\n  private createMapDataSource(dsConfig: IMDataSourceJson): MapDataSource {\n    let map = new Map({\n    });\n\n    dsConfig.layers.forEach(layer => {\n      map.layers.add(new FeatureLayer(layer));\n    });\n\n    let mapDs = new MapDataSource(dsConfig, map);\n    return mapDs;\n  }\n\n  private createWebMapDataSource(dsConfig: IMDataSourceJson): WebMapDataSource {\n    let webMap;\n    if(dsConfig.portalUrl){\n      let portal = new JimuPortal({\n        url: dsConfig.portalUrl\n      });\n      webMap = new WebMap({\n        portalItem: new PortalItem({\n          id: dsConfig.itemId,\n          portal: portal\n        })\n      });\n    }else{\n      webMap = new WebMap({\n        portalItem: new PortalItem({\n          id: dsConfig.itemId\n        })\n      });\n    }\n\n    let webMapDs = new WebMapDataSource(dsConfig, webMap);\n    return webMapDs;\n  }\n\n  private createWebSceneDataSource(dsConfig: IMDataSourceJson): WebSceneDataSource{\n    let webScene;\n    if(dsConfig.portalUrl){\n      let portal = new JimuPortal({\n        url: dsConfig.portalUrl\n      });\n      webScene = new WebScene({\n        portalItem: new PortalItem({\n          id: dsConfig.itemId,\n          portal: portal\n        })\n      });\n    }else{\n      webScene = new WebScene({\n        portalItem: new PortalItem({\n          id: dsConfig.itemId\n        })\n      });\n    }\n\n    let webSceneDs = new WebSceneDataSource(dsConfig, webScene);\n    return webSceneDs;\n  }\n\n  private createMapViewDataSource(dsConfig: IMDataSourceJson): MapViewDataSource {\n    let mapView: MapView;\n    //TODO: initial mapView from here as an option\n    let mapViewDs = new MapViewDataSource(dsConfig, mapView);\n    return mapViewDs;\n  }\n\n  private createSceneViewDataSource(dsConfig: IMDataSourceJson): SceneViewDataSource {\n    let sceneView: SceneView;\n    //TODO: initial mapView from here as an option\n    let sceneViewDs = new SceneViewDataSource(dsConfig, sceneView);\n    return sceneViewDs;\n  }\n\n  private createFeatureLayerDataSource(dsConfig: IMDataSourceJson): FeatureLayerDataSource {\n    let featureLayer;\n    featureLayer = new FeatureLayer({\n      url: dsConfig.url\n    });\n\n    let featureLayerDs = new FeatureLayerDataSource(dsConfig, featureLayer);\n    return featureLayerDs;\n  }\n\n}","module.exports = __WEBPACK_EXTERNAL_MODULE__9__;","module.exports = __WEBPACK_EXTERNAL_MODULE__12__;","module.exports = __WEBPACK_EXTERNAL_MODULE__13__;","module.exports = __WEBPACK_EXTERNAL_MODULE__14__;","module.exports = __WEBPACK_EXTERNAL_MODULE__15__;","\"use strict\";\n\n/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * \n */\n\nfunction makeEmptyFunction(arg) {\n  return function () {\n    return arg;\n  };\n}\n\n/**\n * This function accepts and discards inputs; it has no side effects. This is\n * primarily useful idiomatically for overridable function endpoints which\n * always need to be callable, since JS lacks a null-call idiom ala Cocoa.\n */\nvar emptyFunction = function emptyFunction() {};\n\nemptyFunction.thatReturns = makeEmptyFunction;\nemptyFunction.thatReturnsFalse = makeEmptyFunction(false);\nemptyFunction.thatReturnsTrue = makeEmptyFunction(true);\nemptyFunction.thatReturnsNull = makeEmptyFunction(null);\nemptyFunction.thatReturnsThis = function () {\n  return this;\n};\nemptyFunction.thatReturnsArgument = function (arg) {\n  return arg;\n};\n\nmodule.exports = emptyFunction;","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */\n\n'use strict';\n\nvar emptyObject = {};\n\nif (process.env.NODE_ENV !== 'production') {\n  Object.freeze(emptyObject);\n}\n\nmodule.exports = emptyObject;","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */\n\n'use strict';\n\n/**\n * Use invariant() to assert state which your program assumes to be true.\n *\n * Provide sprintf-style format (only %s is supported) and arguments\n * to provide information about what broke and what you were\n * expecting.\n *\n * The invariant message will be stripped in production, but the invariant\n * will remain to ensure logic does not differ in production.\n */\n\nvar validateFormat = function validateFormat(format) {};\n\nif (process.env.NODE_ENV !== 'production') {\n  validateFormat = function validateFormat(format) {\n    if (format === undefined) {\n      throw new Error('invariant requires an error message argument');\n    }\n  };\n}\n\nfunction invariant(condition, format, a, b, c, d, e, f) {\n  validateFormat(format);\n\n  if (!condition) {\n    var error;\n    if (format === undefined) {\n      error = new Error('Minified exception occurred; use the non-minified dev environment ' + 'for the full error message and additional helpful warnings.');\n    } else {\n      var args = [a, b, c, d, e, f];\n      var argIndex = 0;\n      error = new Error(format.replace(/%s/g, function () {\n        return args[argIndex++];\n      }));\n      error.name = 'Invariant Violation';\n    }\n\n    error.framesToPop = 1; // we don't care about invariant's own frame\n    throw error;\n  }\n}\n\nmodule.exports = invariant;","/*\nobject-assign\n(c) Sindre Sorhus\n@license MIT\n*/\n\n'use strict';\n/* eslint-disable no-unused-vars */\nvar getOwnPropertySymbols = Object.getOwnPropertySymbols;\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\nvar propIsEnumerable = Object.prototype.propertyIsEnumerable;\n\nfunction toObject(val) {\n\tif (val === null || val === undefined) {\n\t\tthrow new TypeError('Object.assign cannot be called with null or undefined');\n\t}\n\n\treturn Object(val);\n}\n\nfunction shouldUseNative() {\n\ttry {\n\t\tif (!Object.assign) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Detect buggy property enumeration order in older V8 versions.\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=4118\n\t\tvar test1 = new String('abc');  // eslint-disable-line no-new-wrappers\n\t\ttest1[5] = 'de';\n\t\tif (Object.getOwnPropertyNames(test1)[0] === '5') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test2 = {};\n\t\tfor (var i = 0; i < 10; i++) {\n\t\t\ttest2['_' + String.fromCharCode(i)] = i;\n\t\t}\n\t\tvar order2 = Object.getOwnPropertyNames(test2).map(function (n) {\n\t\t\treturn test2[n];\n\t\t});\n\t\tif (order2.join('') !== '0123456789') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test3 = {};\n\t\t'abcdefghijklmnopqrst'.split('').forEach(function (letter) {\n\t\t\ttest3[letter] = letter;\n\t\t});\n\t\tif (Object.keys(Object.assign({}, test3)).join('') !==\n\t\t\t\t'abcdefghijklmnopqrst') {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t} catch (err) {\n\t\t// We don't expect any of the above to throw, but better to be safe.\n\t\treturn false;\n\t}\n}\n\nmodule.exports = shouldUseNative() ? Object.assign : function (target, source) {\n\tvar from;\n\tvar to = toObject(target);\n\tvar symbols;\n\n\tfor (var s = 1; s < arguments.length; s++) {\n\t\tfrom = Object(arguments[s]);\n\n\t\tfor (var key in from) {\n\t\t\tif (hasOwnProperty.call(from, key)) {\n\t\t\t\tto[key] = from[key];\n\t\t\t}\n\t\t}\n\n\t\tif (getOwnPropertySymbols) {\n\t\t\tsymbols = getOwnPropertySymbols(from);\n\t\t\tfor (var i = 0; i < symbols.length; i++) {\n\t\t\t\tif (propIsEnumerable.call(from, symbols[i])) {\n\t\t\t\t\tto[symbols[i]] = from[symbols[i]];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn to;\n};\n","/** @license React v16.4.1\n * react.production.min.js\n *\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';var k=require(\"object-assign\"),n=require(\"fbjs/lib/invariant\"),p=require(\"fbjs/lib/emptyObject\"),q=require(\"fbjs/lib/emptyFunction\"),r=\"function\"===typeof Symbol&&Symbol.for,t=r?Symbol.for(\"react.element\"):60103,u=r?Symbol.for(\"react.portal\"):60106,v=r?Symbol.for(\"react.fragment\"):60107,w=r?Symbol.for(\"react.strict_mode\"):60108,x=r?Symbol.for(\"react.profiler\"):60114,y=r?Symbol.for(\"react.provider\"):60109,z=r?Symbol.for(\"react.context\"):60110,A=r?Symbol.for(\"react.async_mode\"):60111,B=\nr?Symbol.for(\"react.forward_ref\"):60112;r&&Symbol.for(\"react.timeout\");var C=\"function\"===typeof Symbol&&Symbol.iterator;function D(a){for(var b=arguments.length-1,e=\"https://reactjs.org/docs/error-decoder.html?invariant=\"+a,c=0;c<b;c++)e+=\"&args[]=\"+encodeURIComponent(arguments[c+1]);n(!1,\"Minified React error #\"+a+\"; visit %s for the full message or use the non-minified dev environment for full errors and additional helpful warnings. \",e)}\nvar E={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}};function F(a,b,e){this.props=a;this.context=b;this.refs=p;this.updater=e||E}F.prototype.isReactComponent={};F.prototype.setState=function(a,b){\"object\"!==typeof a&&\"function\"!==typeof a&&null!=a?D(\"85\"):void 0;this.updater.enqueueSetState(this,a,b,\"setState\")};F.prototype.forceUpdate=function(a){this.updater.enqueueForceUpdate(this,a,\"forceUpdate\")};function G(){}\nG.prototype=F.prototype;function H(a,b,e){this.props=a;this.context=b;this.refs=p;this.updater=e||E}var I=H.prototype=new G;I.constructor=H;k(I,F.prototype);I.isPureReactComponent=!0;var J={current:null},K=Object.prototype.hasOwnProperty,L={key:!0,ref:!0,__self:!0,__source:!0};\nfunction M(a,b,e){var c=void 0,d={},g=null,h=null;if(null!=b)for(c in void 0!==b.ref&&(h=b.ref),void 0!==b.key&&(g=\"\"+b.key),b)K.call(b,c)&&!L.hasOwnProperty(c)&&(d[c]=b[c]);var f=arguments.length-2;if(1===f)d.children=e;else if(1<f){for(var l=Array(f),m=0;m<f;m++)l[m]=arguments[m+2];d.children=l}if(a&&a.defaultProps)for(c in f=a.defaultProps,f)void 0===d[c]&&(d[c]=f[c]);return{$$typeof:t,type:a,key:g,ref:h,props:d,_owner:J.current}}\nfunction N(a){return\"object\"===typeof a&&null!==a&&a.$$typeof===t}function escape(a){var b={\"=\":\"=0\",\":\":\"=2\"};return\"$\"+(\"\"+a).replace(/[=:]/g,function(a){return b[a]})}var O=/\\/+/g,P=[];function Q(a,b,e,c){if(P.length){var d=P.pop();d.result=a;d.keyPrefix=b;d.func=e;d.context=c;d.count=0;return d}return{result:a,keyPrefix:b,func:e,context:c,count:0}}function R(a){a.result=null;a.keyPrefix=null;a.func=null;a.context=null;a.count=0;10>P.length&&P.push(a)}\nfunction S(a,b,e,c){var d=typeof a;if(\"undefined\"===d||\"boolean\"===d)a=null;var g=!1;if(null===a)g=!0;else switch(d){case \"string\":case \"number\":g=!0;break;case \"object\":switch(a.$$typeof){case t:case u:g=!0}}if(g)return e(c,a,\"\"===b?\".\"+T(a,0):b),1;g=0;b=\"\"===b?\".\":b+\":\";if(Array.isArray(a))for(var h=0;h<a.length;h++){d=a[h];var f=b+T(d,h);g+=S(d,f,e,c)}else if(null===a||\"undefined\"===typeof a?f=null:(f=C&&a[C]||a[\"@@iterator\"],f=\"function\"===typeof f?f:null),\"function\"===typeof f)for(a=f.call(a),\nh=0;!(d=a.next()).done;)d=d.value,f=b+T(d,h++),g+=S(d,f,e,c);else\"object\"===d&&(e=\"\"+a,D(\"31\",\"[object Object]\"===e?\"object with keys {\"+Object.keys(a).join(\", \")+\"}\":e,\"\"));return g}function T(a,b){return\"object\"===typeof a&&null!==a&&null!=a.key?escape(a.key):b.toString(36)}function U(a,b){a.func.call(a.context,b,a.count++)}\nfunction V(a,b,e){var c=a.result,d=a.keyPrefix;a=a.func.call(a.context,b,a.count++);Array.isArray(a)?W(a,c,e,q.thatReturnsArgument):null!=a&&(N(a)&&(b=d+(!a.key||b&&b.key===a.key?\"\":(\"\"+a.key).replace(O,\"$&/\")+\"/\")+e,a={$$typeof:t,type:a.type,key:b,ref:a.ref,props:a.props,_owner:a._owner}),c.push(a))}function W(a,b,e,c,d){var g=\"\";null!=e&&(g=(\"\"+e).replace(O,\"$&/\")+\"/\");b=Q(b,g,c,d);null==a||S(a,\"\",V,b);R(b)}\nvar X={Children:{map:function(a,b,e){if(null==a)return a;var c=[];W(a,c,null,b,e);return c},forEach:function(a,b,e){if(null==a)return a;b=Q(null,null,b,e);null==a||S(a,\"\",U,b);R(b)},count:function(a){return null==a?0:S(a,\"\",q.thatReturnsNull,null)},toArray:function(a){var b=[];W(a,b,null,q.thatReturnsArgument);return b},only:function(a){N(a)?void 0:D(\"143\");return a}},createRef:function(){return{current:null}},Component:F,PureComponent:H,createContext:function(a,b){void 0===b&&(b=null);a={$$typeof:z,\n_calculateChangedBits:b,_defaultValue:a,_currentValue:a,_currentValue2:a,_changedBits:0,_changedBits2:0,Provider:null,Consumer:null};a.Provider={$$typeof:y,_context:a};return a.Consumer=a},forwardRef:function(a){return{$$typeof:B,render:a}},Fragment:v,StrictMode:w,unstable_AsyncMode:A,unstable_Profiler:x,createElement:M,cloneElement:function(a,b,e){null===a||void 0===a?D(\"267\",a):void 0;var c=void 0,d=k({},a.props),g=a.key,h=a.ref,f=a._owner;if(null!=b){void 0!==b.ref&&(h=b.ref,f=J.current);void 0!==\nb.key&&(g=\"\"+b.key);var l=void 0;a.type&&a.type.defaultProps&&(l=a.type.defaultProps);for(c in b)K.call(b,c)&&!L.hasOwnProperty(c)&&(d[c]=void 0===b[c]&&void 0!==l?l[c]:b[c])}c=arguments.length-2;if(1===c)d.children=e;else if(1<c){l=Array(c);for(var m=0;m<c;m++)l[m]=arguments[m+2];d.children=l}return{$$typeof:t,type:a.type,key:g,ref:h,props:d,_owner:f}},createFactory:function(a){var b=M.bind(null,a);b.type=a;return b},isValidElement:N,version:\"16.4.1\",__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{ReactCurrentOwner:J,\nassign:k}},Y={default:X},Z=Y&&X||Y;module.exports=Z.default?Z.default:Z;\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/react.production.min.js');\n} else {\n  module.exports = require('./cjs/react.development.js');\n}\n","import * as React from 'react';\nimport {connect} from 'react-redux';\n\nimport Map = require('esri/Map');\nimport WebMap = require('esri/WebMap');\nimport WebScene = require('esri/WebScene');\nimport MapView = require(\"esri/views/MapView\");\nimport SceneView = require(\"esri/views/SceneView\");\nimport PortalItem = require('esri/portal/PortalItem');\n\nimport {MapDataSource} from '../data-source';\nimport {IMState} from 'jimu-core';\n\ninterface Props{\n  style?: any;\n  itemId?: string;\n  mapDataSource?: MapDataSource;\n  onMapLoaded?: (mapView: MapView) => void;\n}\nexport default class JimuMap extends React.PureComponent<Props, any>{\n  mapContainer: any;\n  \n  componentDidMount(){\n    let map;\n    if(this.props.mapDataSource){\n      map = this.props.mapDataSource.map;\n    }else{\n      map = new WebMap({\n        portalItem: new PortalItem({\n          id: this.props.itemId\n        })\n      });\n    }\n    \n    new MapView({\n      map: map,\n      container: this.mapContainer,\n    }).when(mapView => {\n      if(this.props.onMapLoaded){\n        this.props.onMapLoaded(mapView);\n      }\n    });\n  }\n\n  render(){\n    return <div className=\"map-widget\" style={this.props.style}>\n    <div ref={(dom) => { this.mapContainer = dom; }}></div>\n    </div>;\n  }\n}\n","// import esriConfig = require('esri/config');\n\n// if(window.env === 'development'){\n//   esriConfig.workers.loaderUrl = '../jimu-core/dojo.js.uncompressed.js';\n// }else{\n//   esriConfig.workers.loaderUrl = '../jimu-core/dojo.js'\n// }\n\n// esriConfig.workers.loaderConfig = window.dojoConfig;\nimport {ExtensionManager, ExtensionPoints} from 'jimu-core';\nimport JimuMap from './lib/components/jimu-map';\nimport {DataSourceFactoryExtension} from './lib/data-source';\nimport IdentityManager = require('esri/identity/IdentityManager');\nimport { isSamePortalUrl } from './lib/utils/portal-url-utils';\nimport { SessionManager } from 'jimu-core';\n\n// this should be the first time the IdentityManager has been loaded in the app\n// synchronize session between arcgis-rest-js and JSAPI\nconst sessionManager = SessionManager.getInstance();\nconst session = sessionManager.getSession();\nif (session) {\n  // the user has already signed in using the session service and\n  // let's register the user's existing token w/ IdentityManager\n  IdentityManager.registerToken(session.toCredential());\n} else {\n  // the user NOT has already signed in using the session service\n  // initialize the session service once they sign in to the portal using IdentityManager\n  const handler = IdentityManager.on('credential-create', ({ credential }) => {\n    if (isSamePortalUrl(credential.server, sessionManager.getPortalUrl())) {\n      sessionManager.initFromCredential(credential);\n      handler.remove();\n    }\n  });\n}\n\nExtensionManager.getInstance().registerExtension({\n  epName: ExtensionPoints.DataSourceFactory,\n  extension: new DataSourceFactoryExtension()\n});\n\nexport {JimuMap};\nexport * from './lib/data-source';\n"],"sourceRoot":""}