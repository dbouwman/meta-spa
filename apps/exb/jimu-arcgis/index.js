define(["esri/portal/PortalItem","esri/identity/IdentityManager","jimu-core","esri/request","esri/config","esri/portal/Portal","esri/WebMap","esri/layers/FeatureLayer","esri/WebScene","esri/Map","esri/views/MapView"],function(e,t,r,n,o,a,i,u,c,s,l){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=23)}([function(e,t,r){"use strict";function n(e){return 0===(e=(e=(e||"").trim()).replace(/^(http(s?):?)\/\//gi,"")).indexOf("//")&&(e=e.slice(2)),e.split("/")[0]}function o(e){var t,r,o="";return(t=n(e))&&null!==(r=(t=t.replace(/:\d+$/,"")).match(/[^.]\w+\.\w+$/))&&(o=r[0],/^\d+\.\d+$/.test(o)&&(o="")),o}function a(e){return n(e).toLowerCase().indexOf(".arcgis.com")>=0}function i(e){var t=n(e).toLowerCase();return"www.arcgis.com"===t||"arcgis.com"===t}function u(e){var t=n(e);if(""===t)return"";if(a(t)){i(t)&&(t="www.arcgis.com"),e=s(e=c(e))+"://"+t}else{e=c(e=(e||"").trim().replace(/sharing(.*)/gi,"").replace(/\/*$/g,""));var r=new RegExp("http(s?)://"+t,"g");e.replace(r,"")||(e+="/arcgis")}return e}function c(e){if(e.toLowerCase().indexOf("http://")<=-1&&e.toLowerCase().indexOf("https://")<=-1){var t="";"undefined"!=typeof window&&window.location?(t=window.location.protocol,e=e.startWith("//")?t+e:e.startWith("/")?t+"//"+window.location.host+e:t+"//"+e):(t="http:",e=e.startWith("//")?t+e:t+"//"+e)}return e}function s(e){var t="";return 0===(e=e.toLowerCase()).indexOf("https://")?t="https":0===e.indexOf("http://")&&(t="http"),t}function l(e){return(e=c(e)).replace(/^https:\/\//,"http://")}function p(e){return(e=c(e)).replace(/^http:\/\//,"https://")}function f(e){var t="",r=u(e);return r&&(t=r+"/sharing/rest/content/items"),t}function d(e,t){var r="",n=f(e);return n&&t&&(r=n+"/"+t),r}function h(e){var t="",r=u(e);return r&&(t=r+"/sharing/rest/community/users"),t}function y(e,t){var r="",n=h(e);return e&&t&&(r=n+"/"+t),r}function g(e){var t="";return e&&(t=(e=u(e))+"/sharing/rest/content"),t}function v(e,t,r){var n="",o="";return e&&t&&(n=g(e),o=r?n+"/users/"+t+"/"+r:n+"/users/"+t),o}function m(e,t,r){var n="";return e&&t&&(n=v(e,t,r)+"/items"),n}Object.defineProperty(t,"__esModule",{value:!0}),t.getServerByUrl=n,t.getServerWithProtocol=function(e){var t="";if(e=(e||"").trim()){var r=n(e);if(!r)return t;var o=s(e);o?t=o+"://"+r:0===e.indexOf("//")&&(t="//"+r)}return t},t.isSameServer=function(e,t){return e=n(e)||"",t=n(t)||"",e.toLowerCase()===t.toLowerCase()},t.getDomain=o,t.isSameDomain=function(e,t){var r=o(e),n=o(t);return""!==r&&r===n},t.isOrgOnline=function(e){return n(e).toLowerCase().indexOf(".maps.arcgis.com")>=0},t.isOnline=a,t.isArcGIScom=i,t.getStandardPortalUrl=u,t.isSamePortalUrl=function(e,t){var r=/^http(s?):\/\//gi,n=/^\/\//gi;return(e=u(e).toLowerCase().replace(r,"").replace(n,""))===(t=u(t).toLowerCase().replace(r,"").replace(n,""))},t.addProtocol=c,t.getProtocol=s,t.updateUrlProtocolByOtherUrl=function(e,t){return 0===(t=t.toLowerCase()).indexOf("https://")?e=p(e):0===t.indexOf("http://")&&(e=l(e)),e},t.removeProtocol=function(e){return e.replace(/^http(s?):\/\//i,"//")},t.setHttpProtocol=l,t.setHttpsProtocol=p,t.setProtocol=function(e,t){return t.indexOf("https")>=0?p(e):t.indexOf("http")>=0?l(e):e},t.getSharingUrl=function(e){var t="",r=u(e);return r&&(t=r+"/sharing/rest"),t},t.getOAuth2Url=function(e){var t="",r=u(e);return r&&(t=r+"/sharing/rest/oauth2"),t},t.getAppIdUrl=function(e,t){var r="",n=u(e);return n&&(r=n+"/sharing/rest/oauth2/apps/"+t),r},t.getSignInUrl=function(e){var t="",r=u(e);return r&&(t=r+"/home/signin.html"),t},t.getBaseSearchUrl=function(e){var t="",r=u(e);return(r=r.replace(/\/*$/g,""))&&(t=r+"/sharing/rest/search"),t},t.getBaseItemUrl=f,t.getItemUrl=d,t.getItemDataUrl=function(e,t){var r="",n=d(e,t);return n&&(r=n+"/data"),r},t.getItemGroupsUrl=function(e,t){var r="",n=d(e,t);return n&&(r=n+"/groups"),r},t.getGenerateTokenUrl=function(e){var t="";return(e=u(e))&&(t=e+"/sharing/generateToken"),t},t.getItemDetailsPageUrl=function(e,t){var r="";return e&&t&&(r=(e=u(e))+"/home/item.html?id="+t),r},t.getUserProfilePageUrl=function(e,t){var r="";return e&&t&&(r=(e=u(e))+"/home/user.html?user="+t),r},t.getBaseGroupUrl=function(e){var t="",r=u(e);return r&&(t=r+"/sharing/rest/community/groups"),t},t.getPortalSelfInfoUrl=function(e){var t="",r=e||"";return(r=u(r))&&(t=r+"/sharing/rest/portals/self"),t},t.getCommunitySelfUrl=function(e){var t="",r=e||"";return(r=u(r))&&(t=r+"/sharing/rest/community/self"),t},t.getBaseUserUrl=h,t.getUserUrl=y,t.getUserTagsUrl=function(e,t){var r="",n=y(e,t);return e&&t&&(r=n+"/tags"),r},t.getUserThumbnailUrl=function(e,t,r){var n="",o=y(e,t);return o&&r&&(n=o+"/info/"+r),n},t.getContentUrl=g,t.getUserContentUrl=v,t.getUserContentItemUrl=function(e,t,r){var n="";return e&&t&&r&&(n=v(e,t)+"/items/"+r),n},t.getItemResourceUrl=function(e,t,r){var n="",o="";return e&&t&&(n=g(e),o=r?n+"/items/"+t+"/resources/"+r:n+"/items/"+t+"/resources"),o},t.getAddItemUrl=function(e,t,r){var n="";return e&&t&&(n=v(e,t,r)+"/addItem"),n},t.getDeleteItemUrl=function(e,t,r){var n="",o=m(e,t);return o&&(n=o+"/"+r+"/delete"),n},t.getUserItemsUrl=m,t.getUpdateItemUrl=function(e,t,r,n){var o="";return e&&t&&(o=m(e,t,n)+"/"+r+"/update"),o},t.shareItemUrl=function(e,t,r,n){var o="";return e&&t&&(o=m(e,t,n)+"/"+r+"/share"),o},t.getHomeIndexUrl=function(e){var t="",r=u(e);return r&&(t=r+"/home/index.html"),t},t.getHomeMapViewerUrl=function(e,t){var r="",n=u(e);return n&&(r=n+"/home/webmap/viewer.html",r+=t?"?webmap="+t:"?useExisting=1"),r},t.getHomeSceneViewerUrl=function(e,t){var r="",n=u(e);return n&&(r=n+"/home/webscene/viewer.html",t&&(r+="?webscene="+t)),r},t.getHomeGalleryUrl=function(e){var t="",r=u(e);return r&&(t=r+"/home/gallery.html"),t},t.getHomeGroupsUrl=function(e){var t="",r=u(e);return r&&(t=r+"/home/groups.html"),t},t.getHomeMyContentUrl=function(e){var t="",r=u(e);return r&&(t=r+"/home/content.html"),t},t.getHomeMyOrganizationUrl=function(e){var t="",r=u(e);return r&&(t=r+"/home/organization.html"),t},t.getHomeUserUrl=function(e){var t="",r=u(e);return r&&(t=r+"/home/user.html"),t},t.getPortalHelpUrl=function(e,t){var r="",n=u(e);return n&&(r=n+"/portalhelp/"+(t||"en")+"/website/help/"),r},t.getPortalAdminHelpUrl=function(e,t){var r="",n=u(e);return n&&(r=n+"/portalhelp/"+(t||"en")+"/admin/help/"),r},t.getPortalProxyUrl=function(e){var t="",r=u(e);return r&&(t=r+"/sharing/proxy"),t},t.getOAuth2SignOutUrl=function(e){var t="",r=u(e);return r&&(t=r+"/sharing/rest/oauth2/signout"),t},t.getNewPrintUrl=function(e){var t="",r=u(e);return r&&(t=(r=l(r))+"/sharing/tools/newPrint"),t},t.getSwitchAccoutnsUrl=function(e,t,r){var n="",o=u(e);return o&&(n=o+"/home/pages/Account/manage_accounts.html#client_id="+t,r&&(n+="&redirect_uri="+r)),n&&(n=p(n)),n}},function(t,r){t.exports=e},function(e,r){e.exports=t},function(e,t){e.exports=r},function(e,t){e.exports=n},function(e,t){e.exports=o},function(e,t){e.exports=a},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=r(6),a=r(1),i=r(5),u=r(2),c=r(4),s=r(0),l={},p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.getItem=function(e){var t=s.getItemUrl(this.url,e),r={responseType:"json",query:{f:"json"},callbackParamName:"callback"};return this.getToken()&&(r.query.token=this.getToken()),c(t,r).then(function(e){return new a(e.data)})},t.prototype.getItemData=function(e){var t=s.getItemDataUrl(this.url,e),r={responseType:"json",query:{f:"json"},callbackParamName:"callback"};return this.getToken()&&(r.query.token=this.getToken()),c(t,r).then(function(e){return e.data})},t.prototype.getToken=function(){if(!this.user)return null;var e=u.findCredential(this.url,this.user.username);return e?e.token:null},t}(o);function f(e){return void 0===e&&(e=i.portalUrl),l[e]}t.JimuPortal=p,t.getPortal=f,t.createPortal=function(e){if(void 0===e&&(e=i.portalUrl),l[e])return l[e].loaded?Promise.resolve(l[e]):l[e].load().then(function(e){return e});var t=new p({url:e});return l[e]=t,l[e].load().then(function(e){return e})},t.checkItemTitleExist=function(e,t,r){var n={query:"owner:"+t+" title:"+r};return f(e).queryItems(n).then(function(e){return e.total>0})},t.getDefaultWebScene=function(e){var t=s.getStandardPortalUrl(e);return function(e){var t=f(s.getStandardPortalUrl(e)),r={query:'typekeywords:"WABDefaultWebScene" access:public  '+function(e){var t="",r=function(){var e=[];return e=(e=e.concat(["Web Map","Web Scene","CityEngine Web Scene"]).concat(["Feature Service","Map Service","Image Service","KML","WMS","Feature Collection","Feature Collection Template","Geodata Service","Globe Service"]).concat(["Geometry Service","Geocoding Service","Network Analysis Service","Geoprocessing Service"]).concat(["Web Mapping Application","Mobile Application","Code Attachment","Operations Dashboard Add In","Operation View"]).concat(["Symbol Set","Color Set","Shapefile","CSV","Service Definition","Document Link","Microsoft Word","Microsoft PowerPoint","Microsoft Excel","PDF","Image","Visio Document"])).concat(["Map Document","Map Package","Tile Package","ArcPad Package","Explorer Map","Globe Document","Scene Document","Published Map","Map Template","Windows Mobile Package"]).concat(["Layer","Layer Package","Explorer Layer"]).concat(["Geoprocessing Package","Geoprocessing Sample","Locator Package","Rule Package"]).concat(["Workflow Manager Package","Desktop Application","Desktop Application Template","Code Sample","Desktop Add In","Explorer Add In"])}();if(e&&e.length>0&&e.length>0){var n="";e.forEach(function(t,r){var o=' type:"'+t+'" ';n+=o,r!==e.length-1&&(n+=" OR ")}),t=" ( "+n+" ) ";var o=e.concat(r),a=o.filter(function(t){return e.every(function(e){return e.toLowerCase().indexOf(t.toLowerCase())<0})});a.forEach(function(e){var r=' -type:"'+e+'" ';t+=r})}return t}(["Web Scene"])+" "};return t.queryItems(r).then(function(e){return e&&e.results&&e.results.length>0?e.results[0].id:null})}(t).then(function(e){return e||function(e){return e=s.getStandardPortalUrl(e),this.getPortal(e).getUser().then(function(e){var t={operationalLayers:[],baseMap:{id:"151b431fe65-basemap-0",title:"Topographic",baseMapLayers:[{id:"defaultBasemap",url:"http://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer"}],elevationLayers:[{id:"globalElevation",url:"http://elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/Terrain3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"}]},version:"1.3",authoringApp:"WebSceneViewer",authoringAppVersion:"3.10.0.0",spatialReference:{wkid:102100,latestWkid:3857},viewingMode:"global",initialState:{viewpoint:{scale:45188197.847224146,rotation:0,targetGeometry:{x:144770.99872895706,y:3232837.215000455,spatialReference:{wkid:102100,latestWkid:3857},z:-127.7412482528016},camera:{position:{x:144770.99767624016,y:3182557.105058348,spatialReference:{wkid:102100,latestWkid:3857},z:25512548.00000001},heading:0,tilt:.0999986601088944}},environment:{lighting:{datetime:1426420488e3,displayUTCOffset:0}}},presentation:{slides:[]}},r={title:"Default Web Scene",type:"Web Scene",typeKeywords:"WABDefaultWebScene",tags:"default",text:JSON.stringify(t),snippet:""};return e.addItem(r,"").then(function(e){return e.success?e.id:(console.error("Can't create default web scene:",e),Promise.reject(e))})})}(t).then(function(e){return f(t).user,e})})}},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var o,a=r(3),i=r(14),u=r(9),c=r(13),s=r(12),l=r(1),p=r(3),f=r(7);!function(e){e.Map="MAP",e.WebMap="WEB_MAP",e.WebScene="WEB_SCENE",e.MapView="WEB_MAP_VIEW",e.SceneView="WEB_SCENE_VIEW",e.FeatureLayer="FEATURE_LAYER",e.FeatureLayerView="FEATURE_LAYER_VIEW"}(o=t.DataSourceTypes||(t.DataSourceTypes={}));var d=function(e){function t(t,r){var n=e.call(this)||this;return n.type=o.Map,n.isDataSourceSet=!0,n.map=r,n}return n(t,e),t.prototype.init=function(){},t.prototype.getDataSources=function(){return this.map.layers.toArray().map(function(e){var t={id:e.id};return new b(t,e)})},t.prototype.getDataSchema=function(){},t}(a.AbstractDataSource);t.MapDataSource=d;var h=function(e){function t(t,r){var n=e.call(this)||this;return n.type=o.WebMap,n.isDataSourceSet=!0,n.webMap=r,n}return n(t,e),t.prototype.init=function(){},t.prototype.getDataSources=function(){return[]},t.prototype.getDataSchema=function(){},t}(a.AbstractDataSource);t.WebMapDataSource=h;var y=function(e){function t(t,r){var n=e.call(this)||this;return n.type=o.WebScene,n.isDataSourceSet=!0,n.webScene=r,n}return n(t,e),t.prototype.init=function(){},t.prototype.getDataSources=function(){return[]},t.prototype.getDataSchema=function(){},t}(a.AbstractDataSource);t.WebSceneDataSource=y;var g=function(e){function t(t,r){var n=e.call(this)||this;return n.type=o.MapView,n.isDataSourceSet=!0,n.layerViewDatasources={},n.setView(r),n.id=t.id,n}return n(t,e),t.prototype.init=function(){},t.prototype.getDataSources=function(){return[]},t.prototype.setView=function(e){var t=this;e&&(this.mapView=e,e.when(function(){t.updateStatus(p.DataSourceStatus.Loaded)}))},t.prototype.getLayerViewDatasourceOnDemand=function(e){if(!this.mapView||0===this.mapView.allLayerViews.length)return null;if(this.layerViewDatasources[e])return this.layerViewDatasources[e];var t=this.mapView.allLayerViews.find(function(t){return t.layer.id===e});if(!t)return null;var r={id:t.layer.id},n=new D(r,t);return this.layerViewDatasources[e]=n,n},t.prototype.selectRecord=function(e,t){if(e!==this.currentIndexes[0]){var r=this.getLayerViewDatasourceOnDemand(t);this.currentLayerView=r,this.currentIndexes=[e],this.dataSourceManager.onDataSourceCurrentIndexesChanged(this.id,[e])}},t.prototype.highlightRecord=function(e,t){var r=this.getLayerViewDatasourceOnDemand(t),n=r.featureLayerDatasource.getRecords();if(r&&n){var o=n.findIndex(function(t){return t.feature.attributes[r.featureLayerDatasource.featureLayer.objectIdField]===e});this.selectRecord(o,t),this._highlightHandler&&this._highlightHandler.remove(),this._highlightHandler=r.featureLayerView.highlight(e)}},t.prototype.getCurrentRecord=function(){return void 0!==this.currentIndexes&&void 0!==this.currentIndexes[0]&&this.currentLayerView?this.currentLayerView.getRecords()[this.currentIndexes[0]]:null},t.prototype.getDataSchema=function(){},t}(a.AbstractDataSource);t.ViewDataSource=g;var v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=o.MapView,t}return n(t,e),t}(g);t.MapViewDataSource=v;var m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=o.SceneView,t}return n(t,e),t}(g);t.SceneViewDataSource=m;var S=function(){function e(e){this.feature=e}return e.prototype.getData=function(){return this.feature.attributes},e}();t.FeatureDataRecord=S;var w=function(e){function t(t,r){var n=e.call(this)||this;return n.featureSet=r,n.records=n.featureSet.features.map(function(e){return new S(e)}),n}return n(t,e),t.prototype.init=function(){},t.prototype.getDataSchema=function(){},t}(a.AbstractDataSource);t.FeatureSetDataSource=w;var b=function(e){function t(t,r){var n=e.call(this)||this;return n.featureLayer=r,n.url=r.url,n.type=o.FeatureLayer,n.id=t.id,n}return n(t,e),t.prototype.init=function(){this.updateStatus(p.DataSourceStatus.Unloaded)},t.prototype.query=function(e){var t=this;return this.status&&this.status!==p.DataSourceStatus.Unloaded?this.updateStatus(p.DataSourceStatus.LoadedLoading):this.updateStatus(p.DataSourceStatus.UnloadedLoading),this.featureLayer.queryFeatures(e).then(function(e){var r=e.features.map(function(e){return new S(e)});return t.records=r,t.updateStatus(p.DataSourceStatus.Loaded),r})},t.prototype.selectRecord=function(e){this.currentIndexes=[e],this.dataSourceManager.onDataSourceCurrentIndexesChanged(this.id,[e])},t.prototype.getDataSchema=function(){},t}(a.AbstractDataSource);t.FeatureLayerDataSource=b;var D=function(e){function t(t,r){var n=e.call(this)||this;return n.featureLayerView=r,n.type=o.FeatureLayerView,n.id=t.id,n.featureLayerDatasource=new b({id:r.layer.id},r.layer),n}return n(t,e),t.prototype.init=function(){},t.prototype.getRecords=function(){return this.featureLayerDatasource.getRecords()},t.prototype.getCurrentRecord=function(){return this.featureLayerDatasource.getCurrentRecord()},t.prototype.getDataSchema=function(){},t}(a.AbstractDataSource);t.FeatureLayerViewDataSource=D;var _=function(){function e(){this.id="arcgis-data-source-factory"}return e.prototype.getSupportDataSourceTypes=function(){return[o.Map,o.WebMap,o.FeatureLayer,o.WebScene,o.MapView,o.SceneView]},e.prototype.createDataSource=function(e){return e.type===o.Map?this.createMapDataSource(e):e.type===o.FeatureLayer?this.createFeatureLayerDataSource(e):e.type===o.WebMap?this.createWebMapDataSource(e):e.type===o.WebScene?this.createWebSceneDataSource(e):e.type===o.MapView?this.createMapViewDataSource(e):e.type===o.SceneView?this.createSceneViewDataSource(e):void console.error("Unknow arcgis data source type.",e.type)},e.prototype.createMapDataSource=function(e){var t=new i({});return e.layers.forEach(function(e){t.layers.add(new s(e))}),new d(e,t)},e.prototype.createWebMapDataSource=function(e){var t;if(e.portalUrl){var r=new f.JimuPortal({url:e.portalUrl});t=new u({portalItem:new l({id:e.itemId,portal:r})})}else t=new u({portalItem:new l({id:e.itemId})});return new h(e,t)},e.prototype.createWebSceneDataSource=function(e){var t;if(e.portalUrl){var r=new f.JimuPortal({url:e.portalUrl});t=new c({portalItem:new l({id:e.itemId,portal:r})})}else t=new c({portalItem:new l({id:e.itemId})});return new y(e,t)},e.prototype.createMapViewDataSource=function(e){return new v(e,void 0)},e.prototype.createSceneViewDataSource=function(e){return new m(e,void 0)},e.prototype.createFeatureLayerDataSource=function(e){var t;return t=new s({url:e.url}),new b(e,t)},e}();t.DataSourceFactoryExtension=_},function(e,t){e.exports=i},,,function(e,t){e.exports=u},function(e,t){e.exports=c},function(e,t){e.exports=s},function(e,t){e.exports=l},function(e,t,r){"use strict";function n(e){return function(){return e}}var o=function(){};o.thatReturns=n,o.thatReturnsFalse=n(!1),o.thatReturnsTrue=n(!0),o.thatReturnsNull=n(null),o.thatReturnsThis=function(){return this},o.thatReturnsArgument=function(e){return e},e.exports=o},function(e,t,r){"use strict";e.exports={}},function(e,t,r){"use strict";var n=function(e){};e.exports=function(e,t,r,o,a,i,u,c){if(n(t),!e){var s;if(void 0===t)s=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[r,o,a,i,u,c],p=0;(s=new Error(t.replace(/%s/g,function(){return l[p++]}))).name="Invariant Violation"}throw s.framesToPop=1,s}}},function(e,t,r){"use strict";
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var n=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},r=0;r<10;r++)t["_"+String.fromCharCode(r)]=r;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach(function(e){n[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var r,i,u=function(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),c=1;c<arguments.length;c++){for(var s in r=Object(arguments[c]))o.call(r,s)&&(u[s]=r[s]);if(n){i=n(r);for(var l=0;l<i.length;l++)a.call(r,i[l])&&(u[i[l]]=r[i[l]])}}return u}},function(e,t,r){"use strict";
/** @license React v16.4.1
 * react.production.min.js
 *
 * Copyright (c) 2013-present, Facebook, Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n=r(19),o=r(18),a=r(17),i=r(16),u="function"==typeof Symbol&&Symbol.for,c=u?Symbol.for("react.element"):60103,s=u?Symbol.for("react.portal"):60106,l=u?Symbol.for("react.fragment"):60107,p=u?Symbol.for("react.strict_mode"):60108,f=u?Symbol.for("react.profiler"):60114,d=u?Symbol.for("react.provider"):60109,h=u?Symbol.for("react.context"):60110,y=u?Symbol.for("react.async_mode"):60111,g=u?Symbol.for("react.forward_ref"):60112;u&&Symbol.for("react.timeout");var v="function"==typeof Symbol&&Symbol.iterator;function m(e){for(var t=arguments.length-1,r="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=0;n<t;n++)r+="&args[]="+encodeURIComponent(arguments[n+1]);o(!1,"Minified React error #"+e+"; visit %s for the full message or use the non-minified dev environment for full errors and additional helpful warnings. ",r)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}};function w(e,t,r){this.props=e,this.context=t,this.refs=a,this.updater=r||S}function b(){}function D(e,t,r){this.props=e,this.context=t,this.refs=a,this.updater=r||S}w.prototype.isReactComponent={},w.prototype.setState=function(e,t){"object"!=typeof e&&"function"!=typeof e&&null!=e&&m("85"),this.updater.enqueueSetState(this,e,t,"setState")},w.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},b.prototype=w.prototype;var _=D.prototype=new b;_.constructor=D,n(_,w.prototype),_.isPureReactComponent=!0;var P={current:null},U=Object.prototype.hasOwnProperty,x={key:!0,ref:!0,__self:!0,__source:!0};function O(e,t,r){var n=void 0,o={},a=null,i=null;if(null!=t)for(n in void 0!==t.ref&&(i=t.ref),void 0!==t.key&&(a=""+t.key),t)U.call(t,n)&&!x.hasOwnProperty(n)&&(o[n]=t[n]);var u=arguments.length-2;if(1===u)o.children=r;else if(1<u){for(var s=Array(u),l=0;l<u;l++)s[l]=arguments[l+2];o.children=s}if(e&&e.defaultProps)for(n in u=e.defaultProps)void 0===o[n]&&(o[n]=u[n]);return{$$typeof:c,type:e,key:a,ref:i,props:o,_owner:P.current}}function M(e){return"object"==typeof e&&null!==e&&e.$$typeof===c}var I=/\/+/g,L=[];function k(e,t,r,n){if(L.length){var o=L.pop();return o.result=e,o.keyPrefix=t,o.func=r,o.context=n,o.count=0,o}return{result:e,keyPrefix:t,func:r,context:n,count:0}}function C(e){e.result=null,e.keyPrefix=null,e.func=null,e.context=null,e.count=0,10>L.length&&L.push(e)}function A(e,t,r,n){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var a=!1;if(null===e)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case c:case s:a=!0}}if(a)return r(n,e,""===t?"."+V(e,0):t),1;if(a=0,t=""===t?".":t+":",Array.isArray(e))for(var i=0;i<e.length;i++){var u=t+V(o=e[i],i);a+=A(o,u,r,n)}else if(null===e||void 0===e?u=null:u="function"==typeof(u=v&&e[v]||e["@@iterator"])?u:null,"function"==typeof u)for(e=u.call(e),i=0;!(o=e.next()).done;)a+=A(o=o.value,u=t+V(o,i++),r,n);else"object"===o&&m("31","[object Object]"===(r=""+e)?"object with keys {"+Object.keys(e).join(", ")+"}":r,"");return a}function V(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+(""+e).replace(/[=:]/g,function(e){return t[e]})}(e.key):t.toString(36)}function j(e,t){e.func.call(e.context,t,e.count++)}function E(e,t,r){var n=e.result,o=e.keyPrefix;e=e.func.call(e.context,t,e.count++),Array.isArray(e)?W(e,n,r,i.thatReturnsArgument):null!=e&&(M(e)&&(t=o+(!e.key||t&&t.key===e.key?"":(""+e.key).replace(I,"$&/")+"/")+r,e={$$typeof:c,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}),n.push(e))}function W(e,t,r,n,o){var a="";null!=r&&(a=(""+r).replace(I,"$&/")+"/"),t=k(t,a,n,o),null==e||A(e,"",E,t),C(t)}var R={Children:{map:function(e,t,r){if(null==e)return e;var n=[];return W(e,n,null,t,r),n},forEach:function(e,t,r){if(null==e)return e;t=k(null,null,t,r),null==e||A(e,"",j,t),C(t)},count:function(e){return null==e?0:A(e,"",i.thatReturnsNull,null)},toArray:function(e){var t=[];return W(e,t,null,i.thatReturnsArgument),t},only:function(e){return M(e)||m("143"),e}},createRef:function(){return{current:null}},Component:w,PureComponent:D,createContext:function(e,t){return void 0===t&&(t=null),(e={$$typeof:h,_calculateChangedBits:t,_defaultValue:e,_currentValue:e,_currentValue2:e,_changedBits:0,_changedBits2:0,Provider:null,Consumer:null}).Provider={$$typeof:d,_context:e},e.Consumer=e},forwardRef:function(e){return{$$typeof:g,render:e}},Fragment:l,StrictMode:p,unstable_AsyncMode:y,unstable_Profiler:f,createElement:O,cloneElement:function(e,t,r){(null===e||void 0===e)&&m("267",e);var o=void 0,a=n({},e.props),i=e.key,u=e.ref,s=e._owner;if(null!=t){void 0!==t.ref&&(u=t.ref,s=P.current),void 0!==t.key&&(i=""+t.key);var l=void 0;for(o in e.type&&e.type.defaultProps&&(l=e.type.defaultProps),t)U.call(t,o)&&!x.hasOwnProperty(o)&&(a[o]=void 0===t[o]&&void 0!==l?l[o]:t[o])}if(1===(o=arguments.length-2))a.children=r;else if(1<o){l=Array(o);for(var p=0;p<o;p++)l[p]=arguments[p+2];a.children=l}return{$$typeof:c,type:e.type,key:i,ref:u,props:a,_owner:s}},createFactory:function(e){var t=O.bind(null,e);return t.type=e,t},isValidElement:M,version:"16.4.1",__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{ReactCurrentOwner:P,assign:n}},T={default:R},F=T&&R||T;e.exports=F.default?F.default:F},function(e,t,r){"use strict";e.exports=r(20)},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=r(21),a=r(9),i=r(15),u=r(1),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.componentDidMount=function(){var e,t=this;e=this.props.mapDataSource?this.props.mapDataSource.map:new a({portalItem:new u({id:this.props.itemId})}),new i({map:e,container:this.mapContainer}).when(function(e){t.props.onMapLoaded&&t.props.onMapLoaded(e)})},t.prototype.render=function(){var e=this;return o.createElement("div",{className:"map-widget",style:this.props.style},o.createElement("div",{ref:function(t){e.mapContainer=t}}))},t}(o.PureComponent);t.default=c},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3),o=r(22);t.JimuMap=o.default;var a=r(8),i=r(2),u=r(0),c=r(3).SessionManager.getInstance(),s=c.getSession();if(s)i.registerToken(s.toCredential());else var l=i.on("credential-create",function(e){var t=e.credential;u.isSamePortalUrl(t.server,c.getPortalUrl())&&(c.initFromCredential(t),l.remove())});n.ExtensionManager.getInstance().registerExtension({epName:n.ExtensionPoints.DataSourceFactory,extension:new a.DataSourceFactoryExtension}),function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(8))}])});
//# sourceMappingURL=index.js.map